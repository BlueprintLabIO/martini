{
  "version": 3,
  "sources": ["../src/IframeBridgeTransport.ts", "../src/IframeBridgeRelay.ts"],
  "sourcesContent": ["/**\n * IframeBridgeTransport - Iframe-based transport for sandboxed multiplayer\n *\n * Perfect for:\n * - IDE dual-view local testing (sandboxed iframes)\n * - Any scenario where peers are in separate sandboxed iframes\n * - Testing with iframe isolation\n *\n * Architecture:\n * - Parent window runs IframeBridgeRelay (message hub)\n * - Each iframe has IframeBridgeTransport instance\n * - Messages flow: iframe \u2192 parent relay \u2192 other iframes\n *\n * @example\n * ```typescript\n * // In parent window\n * const relay = new IframeBridgeRelay();\n * relay.registerIframe('host', hostIframe);\n * relay.registerIframe('client', clientIframe);\n *\n * // In host iframe\n * const transport = new IframeBridgeTransport({ roomId: 'room-1', isHost: true });\n *\n * // In client iframe\n * const transport = new IframeBridgeTransport({ roomId: 'room-1', isHost: false });\n * ```\n */\n\nimport type { Transport, WireMessage, TransportMetrics, ConnectionState, MessageStats } from '@martini-kit/core';\n\ntype ConnectionChangeHandler = (state: ConnectionState) => void;\n\nexport interface IframeBridgeConfig {\n  /** Unique room identifier */\n  roomId: string;\n\n  /** Player ID (auto-generated if not provided) */\n  playerId?: string;\n\n  /** Whether this instance is the host */\n  isHost: boolean;\n}\n\n/**\n * Message types for iframe \u2194 parent communication\n */\nexport interface BridgeMessage {\n  type: 'BRIDGE_REGISTER' | 'BRIDGE_SEND' | 'BRIDGE_DELIVER' | 'BRIDGE_PEER_JOIN' | 'BRIDGE_PEER_LEAVE' | 'BRIDGE_HOST_DISCONNECT' | 'BRIDGE_HEARTBEAT' | 'BRIDGE_ERROR';\n  roomId: string;\n  playerId: string;\n  payload?: {\n    message?: WireMessage;\n    targetId?: string;\n    peerId?: string;\n    wasHost?: boolean;\n    error?: string;\n  };\n}\n\n/**\n * Metrics implementation for IframeBridgeTransport\n */\nclass IframeBridgeTransportMetrics implements TransportMetrics {\n  private connectionState: ConnectionState = 'connecting';\n  private connectionChangeHandlers: ConnectionChangeHandler[] = [];\n  private messagesSent = 0;\n  private messagesReceived = 0;\n  private messagesErrored = 0;\n\n  constructor(private transport: IframeBridgeTransport) {\n    // Start as 'connecting', will change to 'connected' when relay responds\n  }\n\n  getConnectionState(): ConnectionState {\n    return this.connectionState;\n  }\n\n  onConnectionChange(callback: ConnectionChangeHandler): () => void {\n    this.connectionChangeHandlers.push(callback);\n    return () => {\n      const idx = this.connectionChangeHandlers.indexOf(callback);\n      if (idx >= 0) this.connectionChangeHandlers.splice(idx, 1);\n    };\n  }\n\n  getPeerCount(): number {\n    return this.transport.getPeerIds().length;\n  }\n\n  getMessageStats(): MessageStats {\n    return {\n      sent: this.messagesSent,\n      received: this.messagesReceived,\n      errors: this.messagesErrored\n    };\n  }\n\n  resetStats(): void {\n    this.messagesSent = 0;\n    this.messagesReceived = 0;\n    this.messagesErrored = 0;\n  }\n\n  /** @internal */\n  trackMessageSent(): void {\n    this.messagesSent++;\n  }\n\n  /** @internal */\n  trackMessageReceived(): void {\n    this.messagesReceived++;\n  }\n\n  /** @internal */\n  trackMessageError(): void {\n    this.messagesErrored++;\n  }\n\n  /** @internal */\n  setConnected(): void {\n    if (this.connectionState !== 'connected') {\n      this.connectionState = 'connected';\n      this.notifyConnectionChange();\n    }\n  }\n\n  /** @internal */\n  setDisconnected(): void {\n    if (this.connectionState !== 'disconnected') {\n      this.connectionState = 'disconnected';\n      this.notifyConnectionChange();\n    }\n  }\n\n  private notifyConnectionChange(): void {\n    this.connectionChangeHandlers.forEach(h => {\n      try {\n        h(this.connectionState);\n      } catch (error) {\n        console.error('Error in connection change handler:', error);\n      }\n    });\n  }\n}\n\nexport class IframeBridgeTransport implements Transport {\n  public readonly playerId: string;\n  private readonly roomId: string;\n  private readonly _isHost: boolean;\n  public readonly metrics: TransportMetrics;\n  private readonly HEARTBEAT_INTERVAL_MS = 3000;\n\n  private messageHandlers: Array<(msg: WireMessage, senderId: string) => void> = [];\n  private peerJoinHandlers: Array<(peerId: string) => void> = [];\n  private peerLeaveHandlers: Array<(peerId: string) => void> = [];\n  private hostDisconnectHandlers: Array<() => void> = [];\n\n  private peerIds: Set<string> = new Set();\n  private messageHandler: ((event: MessageEvent) => void) | null = null;\n  private isDisconnected = false;\n  private heartbeatInterval: number | null = null;\n  private visibilityHandler?: () => void;\n\n  constructor(config: IframeBridgeConfig) {\n    // Transport lifecycle guardrail: Prevent double-initialization\n    // This catches bugs where transport is created multiple times without cleanup\n    if (typeof globalThis !== 'undefined' && (globalThis as any).__martini-kit_TRANSPORT__) {\n      throw new Error(\n        '[IframeBridgeTransport] Transport already exists! ' +\n        'Did you forget to call disconnect() before creating a new transport? ' +\n        'Each iframe should only have ONE transport instance. ' +\n        'If you see this error, check for: ' +\n        '1. Multiple initializeGame() calls without cleanup ' +\n        '2. Hot reload without proper transport.disconnect() ' +\n        '3. Navigation without cleanup (should be handled by beforeunload)'\n      );\n    }\n\n    this.roomId = config.roomId;\n    this.playerId = config.playerId || `player-${Math.random().toString(36).substring(2, 9)}`;\n    this._isHost = config.isHost;\n\n    // Initialize metrics\n    this.metrics = new IframeBridgeTransportMetrics(this);\n\n    // Register this transport globally for guardrail\n    if (typeof globalThis !== 'undefined') {\n      (globalThis as any).__martini-kit_TRANSPORT__ = this;\n    }\n\n    this.setupMessageListener();\n    this.registerWithRelay();\n    this.startHeartbeat();\n    this.setupVisibilityListener();\n  }\n\n  /**\n   * Set up listener for messages from parent relay\n   */\n  private setupMessageListener(): void {\n    this.messageHandler = (event: MessageEvent) => {\n      const data = event.data as BridgeMessage;\n\n      // Ignore messages not from our relay system\n      if (!data || !data.type || !data.type.startsWith('BRIDGE_')) {\n        return;\n      }\n\n      // Ignore messages for other rooms\n      if (data.roomId !== this.roomId) {\n        return;\n      }\n\n      switch (data.type) {\n        case 'BRIDGE_DELIVER':\n          // Received message from another peer\n          if (data.payload?.message && data.playerId !== this.playerId) {\n            (this.metrics as IframeBridgeTransportMetrics).trackMessageReceived();\n            this.messageHandlers.forEach(h => h(data.payload!.message!, data.playerId));\n          }\n          break;\n\n        case 'BRIDGE_PEER_JOIN':\n          // Another peer joined the room\n          if (data.payload?.peerId && data.payload.peerId !== this.playerId) {\n            this.peerIds.add(data.payload.peerId);\n            (this.metrics as IframeBridgeTransportMetrics).setConnected(); // Mark as connected when first peer joins\n            this.peerJoinHandlers.forEach(h => h(data.payload!.peerId!));\n          }\n          break;\n\n        case 'BRIDGE_PEER_LEAVE':\n          // Another peer left the room\n          if (data.payload?.peerId) {\n            this.peerIds.delete(data.payload.peerId);\n            this.peerLeaveHandlers.forEach(h => h(data.payload!.peerId!));\n          }\n          break;\n\n        case 'BRIDGE_HOST_DISCONNECT':\n          // Host disconnected\n          if (data.payload?.wasHost && !this._isHost) {\n            this.hostDisconnectHandlers.forEach(h => h());\n          }\n          break;\n\n        case 'BRIDGE_ERROR':\n          // Relay rejected our message (e.g., unknown sender after timeout)\n          // Auto-reconnect to re-establish connection\n          console.warn('[IframeBridgeTransport] Relay error, reconnecting...', data.payload?.error);\n          this.registerWithRelay();\n          this.sendHeartbeat();\n          break;\n      }\n    };\n\n    window.addEventListener('message', this.messageHandler);\n  }\n\n  /**\n   * Register this transport instance with parent relay\n   */\n  private registerWithRelay(): void {\n    if (!window.parent || window.parent === window) {\n      console.warn('[IframeBridgeTransport] No parent window found - transport may not work');\n      return;\n    }\n\n    const registerMessage: BridgeMessage = {\n      type: 'BRIDGE_REGISTER',\n      roomId: this.roomId,\n      playerId: this.playerId,\n      payload: {}\n    };\n\n    window.parent.postMessage(registerMessage, '*');\n  }\n\n  /**\n   * Send periodic heartbeat to relay\n   */\n  private sendHeartbeat(): void {\n    if (this.isDisconnected) return;\n    if (!window.parent || window.parent === window) return;\n\n    const heartbeat: BridgeMessage = {\n      type: 'BRIDGE_HEARTBEAT',\n      roomId: this.roomId,\n      playerId: this.playerId\n    };\n\n    window.parent.postMessage(heartbeat, '*');\n  }\n\n  private startHeartbeat(): void {\n    if (typeof window === 'undefined') return;\n    this.stopHeartbeat();\n    this.sendHeartbeat();\n    this.heartbeatInterval = window.setInterval(() => this.sendHeartbeat(), this.HEARTBEAT_INTERVAL_MS);\n  }\n\n  private stopHeartbeat(): void {\n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n    }\n  }\n\n  private setupVisibilityListener(): void {\n    if (typeof document === 'undefined' || typeof document.addEventListener !== 'function') {\n      return;\n    }\n\n    this.visibilityHandler = () => {\n      if (document.visibilityState === 'visible') {\n        this.registerWithRelay();\n        this.sendHeartbeat();\n      }\n    };\n\n    document.addEventListener('visibilitychange', this.visibilityHandler);\n  }\n\n  /**\n   * Send message to peer(s)\n   */\n  send(message: WireMessage, targetId?: string): void {\n    if (this.isDisconnected) {\n      console.warn('[IframeBridgeTransport] Cannot send - transport is disconnected');\n      (this.metrics as IframeBridgeTransportMetrics).trackMessageError();\n      return;\n    }\n\n    if (!window.parent || window.parent === window) {\n      console.warn('[IframeBridgeTransport] No parent window - message not sent');\n      (this.metrics as IframeBridgeTransportMetrics).trackMessageError();\n      return;\n    }\n\n    try {\n      const bridgeMessage: BridgeMessage = {\n        type: 'BRIDGE_SEND',\n        roomId: this.roomId,\n        playerId: this.playerId,\n        payload: {\n          message,\n          targetId\n        }\n      };\n\n      window.parent.postMessage(bridgeMessage, '*');\n      (this.metrics as IframeBridgeTransportMetrics).trackMessageSent();\n    } catch (error) {\n      (this.metrics as IframeBridgeTransportMetrics).trackMessageError();\n      throw error;\n    }\n  }\n\n  onMessage(handler: (msg: WireMessage, senderId: string) => void): () => void {\n    this.messageHandlers.push(handler);\n    return () => {\n      const idx = this.messageHandlers.indexOf(handler);\n      if (idx >= 0) this.messageHandlers.splice(idx, 1);\n    };\n  }\n\n  onPeerJoin(handler: (peerId: string) => void): () => void {\n    this.peerJoinHandlers.push(handler);\n    return () => {\n      const idx = this.peerJoinHandlers.indexOf(handler);\n      if (idx >= 0) this.peerJoinHandlers.splice(idx, 1);\n    };\n  }\n\n  onPeerLeave(handler: (peerId: string) => void): () => void {\n    this.peerLeaveHandlers.push(handler);\n    return () => {\n      const idx = this.peerLeaveHandlers.indexOf(handler);\n      if (idx >= 0) this.peerLeaveHandlers.splice(idx, 1);\n    };\n  }\n\n  onHostDisconnect(handler: () => void): () => void {\n    this.hostDisconnectHandlers.push(handler);\n    return () => {\n      const idx = this.hostDisconnectHandlers.indexOf(handler);\n      if (idx >= 0) this.hostDisconnectHandlers.splice(idx, 1);\n    };\n  }\n\n  getPlayerId(): string {\n    return this.playerId;\n  }\n\n  getPeerIds(): string[] {\n    return Array.from(this.peerIds);\n  }\n\n  isHost(): boolean {\n    return this._isHost;\n  }\n\n  disconnect(): void {\n    if (this.isDisconnected) return;\n\n    (this.metrics as IframeBridgeTransportMetrics).setDisconnected();\n    this.isDisconnected = true;\n    this.stopHeartbeat();\n\n    // Clear global transport reference to allow new instances\n    if (typeof globalThis !== 'undefined' && (globalThis as any).__martini-kit_TRANSPORT__ === this) {\n      delete (globalThis as any).__martini-kit_TRANSPORT__;\n    }\n\n    // Notify relay\n    if (window.parent && window.parent !== window) {\n      const disconnectMessage: BridgeMessage = {\n        type: 'BRIDGE_PEER_LEAVE',\n        roomId: this.roomId,\n        playerId: this.playerId,\n        payload: {\n          peerId: this.playerId,\n          wasHost: this._isHost\n        }\n      };\n\n      window.parent.postMessage(disconnectMessage, '*');\n    }\n\n    // Clean up\n    if (this.messageHandler) {\n      window.removeEventListener('message', this.messageHandler);\n      this.messageHandler = null;\n    }\n\n    this.messageHandlers = [];\n    this.peerJoinHandlers = [];\n    this.peerLeaveHandlers = [];\n    this.hostDisconnectHandlers = [];\n    this.peerIds.clear();\n\n    if (this.visibilityHandler && typeof document !== 'undefined') {\n      document.removeEventListener('visibilitychange', this.visibilityHandler);\n      this.visibilityHandler = undefined;\n    }\n  }\n}\n", "/**\n * IframeBridgeRelay - Parent window coordinator for iframe-based multiplayer\n *\n * Runs in the parent window and relays messages between sandboxed iframes.\n * Acts as a message hub - receives messages from one iframe and forwards to others.\n *\n * @example\n * ```typescript\n * // In parent window (IDE component)\n * const relay = new IframeBridgeRelay();\n *\n * // When iframes are created\n * relay.registerIframe('host-player-123', hostIframeElement);\n * relay.registerIframe('client-player-456', clientIframeElement);\n *\n * // Cleanup when done\n * relay.destroy();\n * ```\n */\n\nimport type { BridgeMessage } from './IframeBridgeTransport.js';\n\nexport interface PeerInfo {\n  playerId: string;\n  roomId: string;\n  iframe: HTMLIFrameElement;\n  isHost: boolean;\n  lastHeartbeat: number; // Timestamp of last activity\n}\n\nexport class IframeBridgeRelay {\n  private peers: Map<string, PeerInfo> = new Map();\n  private rooms: Map<string, Set<string>> = new Map(); // roomId \u2192 Set<playerId>\n  private messageHandler: ((event: MessageEvent) => void) | null = null;\n  private heartbeatInterval: ReturnType<typeof setInterval> | null = null;\n  private readonly HEARTBEAT_CHECK_MS = 5000; // Check every 5 seconds\n  private readonly PEER_TIMEOUT_MS = 60000; // Remove peers inactive for 60 seconds (accounts for browser throttling)\n\n  constructor() {\n    this.setupMessageListener();\n    this.startHeartbeatMonitor();\n  }\n\n  /**\n   * Set up listener for messages from iframes\n   */\n  private setupMessageListener(): void {\n    this.messageHandler = (event: MessageEvent) => {\n      const data = event.data as BridgeMessage;\n\n      // Ignore non-bridge messages\n      if (!data || !data.type || !data.type.startsWith('BRIDGE_')) {\n        return;\n      }\n\n      switch (data.type) {\n        case 'BRIDGE_REGISTER':\n          this.handleRegister(data, event.source as Window);\n          break;\n\n        case 'BRIDGE_SEND':\n          this.handleSend(data, event.source as Window);\n          break;\n\n        case 'BRIDGE_HEARTBEAT':\n          this.handleHeartbeat(data);\n          break;\n\n        case 'BRIDGE_PEER_LEAVE':\n          this.handlePeerLeave(data);\n          break;\n      }\n    };\n\n    window.addEventListener('message', this.messageHandler);\n  }\n\n  /**\n   * Handle peer registration\n   */\n  private handleRegister(data: BridgeMessage, source: Window): void {\n    const { playerId, roomId } = data;\n\n    // Find the iframe that sent this message\n    const iframe = Array.from(document.querySelectorAll('iframe')).find(\n      (iframe) => iframe.contentWindow === source\n    );\n\n    if (!iframe) {\n      console.warn('[IframeBridgeRelay] Could not find iframe for registration:', playerId);\n      return;\n    }\n\n    const existingPeer = this.peers.get(playerId);\n    if (existingPeer) {\n      existingPeer.iframe = iframe;\n      existingPeer.roomId = roomId;\n      existingPeer.lastHeartbeat = Date.now();\n      if (!this.rooms.has(roomId)) {\n        this.rooms.set(roomId, new Set());\n      }\n      this.rooms.get(roomId)!.add(playerId);\n      return;\n    }\n\n    // Determine if this is the host (first peer in room)\n    const room = this.rooms.get(roomId);\n    const isHost = !room || room.size === 0;\n\n    // Register peer with current timestamp as heartbeat\n    this.peers.set(playerId, {\n      playerId,\n      roomId,\n      iframe,\n      isHost,\n      lastHeartbeat: Date.now()\n    });\n\n    // Add to room\n    if (!this.rooms.has(roomId)) {\n      this.rooms.set(roomId, new Set());\n    }\n    this.rooms.get(roomId)!.add(playerId);\n\n    // Notify existing peers about new peer\n    const existingPeers = this.getPeersInRoom(roomId).filter(p => p.playerId !== playerId);\n    for (const peer of existingPeers) {\n      this.sendToIframe(peer.iframe, {\n        type: 'BRIDGE_PEER_JOIN',\n        roomId,\n        playerId: peer.playerId,\n        payload: { peerId: playerId }\n      });\n    }\n\n    // Notify new peer about existing peers\n    for (const peer of existingPeers) {\n      this.sendToIframe(iframe, {\n        type: 'BRIDGE_PEER_JOIN',\n        roomId,\n        playerId,\n        payload: { peerId: peer.playerId }\n      });\n    }\n  }\n\n  /**\n   * Handle message send from a peer\n   */\n  private handleSend(data: BridgeMessage, source: Window): void {\n    const { playerId, roomId, payload } = data;\n\n    if (!payload?.message) {\n      console.warn('[IframeBridgeRelay] No message in BRIDGE_SEND');\n      return;\n    }\n\n    const sender = this.peers.get(playerId);\n    if (!sender) {\n      console.warn('[IframeBridgeRelay] Unknown sender:', playerId);\n\n      // Find the iframe that sent this message and notify it to reconnect\n      const iframe = Array.from(document.querySelectorAll('iframe')).find(\n        (iframe) => iframe.contentWindow === source\n      );\n\n      if (iframe?.contentWindow) {\n        iframe.contentWindow.postMessage({\n          type: 'BRIDGE_ERROR',\n          roomId,\n          playerId,\n          payload: { error: 'unknown_sender' }\n        }, '*');\n      }\n      return;\n    }\n\n    // Update heartbeat on any activity\n    sender.lastHeartbeat = Date.now();\n\n    // Get target peer(s)\n    const targets = payload.targetId\n      ? [this.peers.get(payload.targetId)].filter(Boolean) as PeerInfo[]\n      : this.getPeersInRoom(roomId).filter(p => p.playerId !== playerId);\n\n    // Deliver message to target(s)\n    for (const target of targets) {\n      this.sendToIframe(target.iframe, {\n        type: 'BRIDGE_DELIVER',\n        roomId,\n        playerId, // Original sender ID\n        payload: { message: payload.message }\n      });\n    }\n  }\n\n  /**\n   * Handle heartbeat from peers\n   */\n  private handleHeartbeat(data: BridgeMessage): void {\n    const { playerId } = data;\n    const peer = this.peers.get(playerId);\n\n    if (!peer) {\n      console.warn('[IframeBridgeRelay] Unknown heartbeat sender:', playerId);\n      return;\n    }\n\n    peer.lastHeartbeat = Date.now();\n  }\n\n  /**\n   * Handle peer leaving\n   */\n  private handlePeerLeave(data: BridgeMessage): void {\n    const { playerId, roomId, payload } = data;\n\n    const peer = this.peers.get(playerId);\n    if (!peer) return;\n\n    // Remove from tracking\n    this.peers.delete(playerId);\n    const room = this.rooms.get(roomId);\n    if (room) {\n      room.delete(playerId);\n      if (room.size === 0) {\n        this.rooms.delete(roomId);\n      }\n    }\n\n    console.log(`[IframeBridgeRelay] Peer ${playerId} left room ${roomId}`);\n\n    // Notify remaining peers\n    const remainingPeers = this.getPeersInRoom(roomId);\n    for (const otherPeer of remainingPeers) {\n      this.sendToIframe(otherPeer.iframe, {\n        type: 'BRIDGE_PEER_LEAVE',\n        roomId,\n        playerId: otherPeer.playerId,\n        payload: {\n          peerId: playerId,\n          wasHost: payload?.wasHost || false\n        }\n      });\n    }\n\n    // If host left, notify about host disconnect\n    if (peer.isHost) {\n      for (const otherPeer of remainingPeers) {\n        this.sendToIframe(otherPeer.iframe, {\n          type: 'BRIDGE_HOST_DISCONNECT',\n          roomId,\n          playerId: otherPeer.playerId,\n          payload: { wasHost: true }\n        });\n      }\n    }\n  }\n\n  /**\n   * Start heartbeat monitor to detect stale peers\n   * Checks every 5 seconds and removes peers inactive for 10+ seconds\n   */\n  private startHeartbeatMonitor(): void {\n    this.heartbeatInterval = setInterval(() => {\n      const now = Date.now();\n      const stalePeers: string[] = [];\n\n      // Find stale peers\n      for (const [playerId, peer] of this.peers) {\n        if (now - peer.lastHeartbeat > this.PEER_TIMEOUT_MS) {\n          console.warn(`[IframeBridgeRelay] Removing stale peer: ${playerId} (inactive for ${now - peer.lastHeartbeat}ms)`);\n          stalePeers.push(playerId);\n        }\n      }\n\n      // Remove stale peers\n      for (const playerId of stalePeers) {\n        const peer = this.peers.get(playerId);\n        if (peer) {\n          this.handlePeerLeave({\n            type: 'BRIDGE_PEER_LEAVE',\n            playerId,\n            roomId: peer.roomId,\n            payload: { peerId: playerId }\n          });\n        }\n      }\n    }, this.HEARTBEAT_CHECK_MS);\n  }\n\n  /**\n   * Get all peers in a room\n   */\n  private getPeersInRoom(roomId: string): PeerInfo[] {\n    const room = this.rooms.get(roomId);\n    if (!room) return [];\n\n    return Array.from(room)\n      .map(playerId => this.peers.get(playerId))\n      .filter(Boolean) as PeerInfo[];\n  }\n\n  /**\n   * Send message to an iframe\n   */\n  private sendToIframe(iframe: HTMLIFrameElement, message: BridgeMessage): void {\n    if (!iframe.contentWindow) {\n      console.warn('[IframeBridgeRelay] Iframe has no contentWindow');\n      return;\n    }\n\n    iframe.contentWindow.postMessage(message, '*');\n  }\n\n  /**\n   * Manually register an iframe (useful for testing or explicit control)\n   */\n  registerIframe(playerId: string, roomId: string, iframe: HTMLIFrameElement, isHost: boolean): void {\n    this.peers.set(playerId, {\n      playerId,\n      roomId,\n      iframe,\n      isHost,\n      lastHeartbeat: Date.now()\n    });\n\n    if (!this.rooms.has(roomId)) {\n      this.rooms.set(roomId, new Set());\n    }\n    this.rooms.get(roomId)!.add(playerId);\n\n    console.log(`[IframeBridgeRelay] Manually registered ${playerId} in ${roomId}`);\n  }\n\n  /**\n   * Get info about registered peers\n   */\n  getPeers(): PeerInfo[] {\n    return Array.from(this.peers.values());\n  }\n\n  /**\n   * Get peers in a specific room\n   */\n  getPeersInRoomById(roomId: string): PeerInfo[] {\n    return this.getPeersInRoom(roomId);\n  }\n\n  /**\n   * Clean up\n   */\n  destroy(): void {\n    if (this.messageHandler) {\n      window.removeEventListener('message', this.messageHandler);\n      this.messageHandler = null;\n    }\n\n    // Stop heartbeat monitor\n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n    }\n\n    this.peers.clear();\n    this.rooms.clear();\n  }\n}\n"],
  "mappings": "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",
  "names": ["iframe"]
}
