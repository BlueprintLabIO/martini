
> @martini/web@0.0.1 dev /Users/yao/blueprint/martini/apps/web
> vite dev

Port 5173 is in use, trying another one...

  [32m[1mVITE[22m v7.2.2[39m  [2mready in [0m[1m638[22m[2m[0m ms[22m

  [32mâžœ[39m  [1mLocal[22m:   [36mhttp://localhost:[1m5174[22m/[39m
[2m  [32mâžœ[39m  [1mNetwork[22m[2m: use [22m[1m--host[22m[2m to expose[22m
[2m[32m  âžœ[39m[22m[2m  press [22m[1mh + enter[22m[2m to show help[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
[36m4:29:57 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:29:57 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:29:57 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m4:30:00 PM[22m [36m[1m[vite][22m[39m [32mvite.config.ts changed, restarting server...[39m
[2m4:30:00 PM[22m [31m[1m[vite][22m[39m [31m[2m(ssr)[22m[39m [31mError when evaluating SSR module /src/routes/play/[shareCode]/+page.svelte: transport was disconnected, cannot call "fetchModule"[39m
      at reviveInvokeError (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:475:14)
      at Object.invoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:549:11)
      at async SSRCompatModuleRunner.getModuleInformation (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1086:7)
      at async request (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1103:83)
      at async eval (/Users/yao/blueprint/martini/node_modules/.pnpm/lucide-svelte@0.553.0_svelte@5.43.4/node_modules/lucide-svelte/dist/aliases/prefixed.js:1134:1)
      at async ESModulesEvaluator.runInlinedModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:913:3)
      at async SSRCompatModuleRunner.directRequest (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1146:59)
      at async SSRCompatModuleRunner.directRequest (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:15747:22)
      at async SSRCompatModuleRunner.cachedRequest (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1053:73)
      at async eval (/Users/yao/blueprint/martini/node_modules/.pnpm/lucide-svelte@0.553.0_svelte@5.43.4/node_modules/lucide-svelte/dist/aliases/index.js:46:1)
[2m4:30:00 PM[22m [31m[1m[vite][22m[39m [31m[2m(ssr)[22m[39m [31mError when evaluating SSR module /src/routes/+layout.ts: Vite module runner has been closed.[39m
      at SSRCompatModuleRunner.getModuleInformation (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1081:26)
      at SSRCompatModuleRunner.cachedModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1063:18)
      at SSRCompatModuleRunner.import (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1013:34)
      at instantiateModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:15720:29)
      at async loud_ssr_load_module (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:71:11)
      at async resolve (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:98:18)
      at async Array.<anonymous> (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:223:41)
      at async respond_with_error (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/respond_with_error.js:45:26)
      at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:362:10)
      at async resolve (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/respond.js:580:18)
[2m4:30:00 PM[22m [31m[1m[vite][22m[39m [31m[2m(ssr)[22m[39m [31mError when evaluating SSR module /src/routes/editor/[projectId]/+page.svelte: transport was disconnected, cannot call "fetchModule"[39m
      at reviveInvokeError (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:475:14)
      at Object.invoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:549:11)
      at async SSRCompatModuleRunner.getModuleInformation (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1086:7)
      at async request (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1103:83)
      at async eval (/Users/yao/blueprint/martini/node_modules/.pnpm/lucide-svelte@0.553.0_svelte@5.43.4/node_modules/lucide-svelte/dist/aliases/prefixed.js:1134:1)
      at async ESModulesEvaluator.runInlinedModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:913:3)
      at async SSRCompatModuleRunner.directRequest (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1146:59)
      at async SSRCompatModuleRunner.directRequest (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:15747:22)
      at async SSRCompatModuleRunner.cachedRequest (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1053:73)
      at async eval (/Users/yao/blueprint/martini/node_modules/.pnpm/lucide-svelte@0.553.0_svelte@5.43.4/node_modules/lucide-svelte/dist/aliases/index.js:46:1)
[2m4:30:00 PM[22m [31m[1m[vite][22m[39m [31m[2m(ssr)[22m[39m [31mError when evaluating SSR module /src/routes/+layout.ts: Vite module runner has been closed.[39m
      at SSRCompatModuleRunner.getModuleInformation (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1081:26)
      at SSRCompatModuleRunner.cachedModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1063:18)
      at SSRCompatModuleRunner.import (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1013:34)
      at instantiateModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:15720:29)
      at async loud_ssr_load_module (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:71:11)
      at async resolve (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:98:18)
      at async Array.<anonymous> (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:223:41)
      at async respond_with_error (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/respond_with_error.js:45:26)
      at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:362:10)
      at async resolve (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/respond.js:580:18)
[2m4:30:00 PM[22m [36m[1m[vite][22m[39m server restarted.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
[36m4:30:03 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:03 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:03 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.















[1;1H[0J[2m4:30:08 PM[22m [36m[1m[vite][22m[39m [32mvite.config.ts changed, restarting server...[39m
[2m4:30:08 PM[22m [31m[1m[vite][22m[39m [31m[2m(ssr)[22m[39m [31mError when evaluating SSR module /src/routes/editor/[projectId]/+page.svelte: transport was disconnected, cannot call "fetchModule"[39m
      at reviveInvokeError (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:475:14)
      at Object.invoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:549:11)
      at async SSRCompatModuleRunner.getModuleInformation (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1086:7)
      at async request (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1103:83)
      at async eval (/Users/yao/blueprint/martini/apps/web/src/routes/editor/[projectId]/FileTree.svelte:6:31)
      at async ESModulesEvaluator.runInlinedModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:913:3)
      at async SSRCompatModuleRunner.directRequest (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1146:59)
      at async SSRCompatModuleRunner.directRequest (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:15747:22)
      at async SSRCompatModuleRunner.cachedRequest (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1053:73)
      at async eval (/Users/yao/blueprint/martini/apps/web/src/routes/editor/[projectId]/+page.svelte:5:31)
[2m4:30:08 PM[22m [31m[1m[vite][22m[39m [31m[2m(ssr)[22m[39m [31mError when evaluating SSR module /src/routes/+layout.ts: Vite module runner has been closed.[39m
      at SSRCompatModuleRunner.getModuleInformation (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1081:26)
      at SSRCompatModuleRunner.cachedModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1063:18)
      at SSRCompatModuleRunner.import (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/module-runner.js:1013:34)
      at instantiateModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:15720:29)
      at async loud_ssr_load_module (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:71:11)
      at async resolve (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:98:18)
      at async Array.<anonymous> (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:223:41)
      at async respond_with_error (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/respond_with_error.js:45:26)
      at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:362:10)
      at async resolve (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/respond.js:580:18)
[2m4:30:08 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m Re-optimizing dependencies because vite config has changed
[2m4:30:09 PM[22m [36m[1m[vite][22m[39m server restarted.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
[36m4:30:13 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:13 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:13 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:19 PM [vite-plugin-svelte] src/routes/editor/[projectId]/GamePreview.svelte:87:16 `runGame` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:19 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:417:1 Unused CSS selector ".btn-primary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:19 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:418:1 Unused CSS selector ".btn-secondary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:19 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:427:1 Unused CSS selector ".btn-primary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:19 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:432:1 Unused CSS selector ".btn-primary:hover"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:19 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:436:1 Unused CSS selector ".btn-secondary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:19 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:441:1 Unused CSS selector ".btn-secondary:hover"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:19 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:445:1 Unused CSS selector ".btn-sm"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:20 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:20 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:20 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:20 PM [vite-plugin-svelte] src/routes/editor/[projectId]/GamePreview.svelte:87:16 `runGame` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:30:20 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:417:1 Unused CSS selector ".btn-primary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:20 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:418:1 Unused CSS selector ".btn-secondary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:20 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:427:1 Unused CSS selector ".btn-primary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:20 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:432:1 Unused CSS selector ".btn-primary:hover"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:20 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:436:1 Unused CSS selector ".btn-secondary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:20 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:441:1 Unused CSS selector ".btn-secondary:hover"
https://svelte.dev/e/css_unused_selector[39m
[36m4:30:20 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:445:1 Unused CSS selector ".btn-sm"
https://svelte.dev/e/css_unused_selector[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /player[0m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 3 total, sending last 3 to model

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)















[1;1H[0J[2m4:34:39 PM[22m [36m[1m[vite][22m[39m [32mvite.config.ts changed, restarting server...[39m
[2m4:34:39 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m Re-optimizing dependencies because vite config has changed
[2m4:34:39 PM[22m [36m[1m[vite][22m[39m server restarted.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
[36m4:34:44 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:34:44 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:34:44 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)
[2m4:34:55 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mâœ¨ new dependencies optimized: [33mvite-plugin-node-polyfills/shims/buffer, vite-plugin-node-polyfills/shims/global[32m[39m
[2m4:34:55 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mâœ¨ optimized dependencies changed. reloading[39m
[36m4:34:56 PM [vite-plugin-svelte] src/routes/editor/[projectId]/GamePreview.svelte:87:16 `runGame` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:34:56 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:417:1 Unused CSS selector ".btn-primary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:56 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:418:1 Unused CSS selector ".btn-secondary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:56 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:427:1 Unused CSS selector ".btn-primary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:56 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:432:1 Unused CSS selector ".btn-primary:hover"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:56 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:436:1 Unused CSS selector ".btn-secondary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:56 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:441:1 Unused CSS selector ".btn-secondary:hover"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:56 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:445:1 Unused CSS selector ".btn-sm"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:56 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:34:56 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:34:56 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:34:56 PM [vite-plugin-svelte] src/routes/editor/[projectId]/GamePreview.svelte:87:16 `runGame` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m4:34:57 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:417:1 Unused CSS selector ".btn-primary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:57 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:418:1 Unused CSS selector ".btn-secondary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:57 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:427:1 Unused CSS selector ".btn-primary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:57 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:432:1 Unused CSS selector ".btn-primary:hover"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:57 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:436:1 Unused CSS selector ".btn-secondary"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:57 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:441:1 Unused CSS selector ".btn-secondary:hover"
https://svelte.dev/e/css_unused_selector[39m
[36m4:34:57 PM [vite-plugin-svelte] src/lib/multiplayer/MultiplayerManager.svelte:445:1 Unused CSS selector ".btn-sm"
https://svelte.dev/e/css_unused_selector[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)















[1;1H[0J[2m4:37:31 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/MessagePartTool.svelte, /src/app.css[22m















[1;1H[0J[2m4:37:31 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/MessagePartTool.svelte[22m















[1;1H[0J[2m4:37:38 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/MessagePartTool.svelte, /src/app.css[22m















[1;1H[0J[2m4:37:38 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/MessagePartTool.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model















[1;1H[0J[2m4:43:03 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m4:43:03 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/api/projects/[id]/assets/+server.ts[22m















[1;1H[0J[2m4:43:22 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte, /src/app.css[22m















[1;1H[0J[2m4:43:22 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m















[1;1H[0J[2m4:43:39 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte, /src/app.css[22m















[1;1H[0J[2m4:43:39 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m















[1;1H[0J[2m4:43:51 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte, /src/app.css[22m















[1;1H[0J[2m4:43:51 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m















[1;1H[0J[2m4:44:07 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte, /src/app.css[22m















[1;1H[0J[2m4:44:07 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m















[1;1H[0J[2m4:44:20 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte?svelte&type=style&lang.css, /src/app.css[22m















[1;1H[0J[2m4:44:20 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m















[1;1H[0J[2m4:44:27 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte, /src/routes/editor/[projectId]/chat/ChatInputArea.svelte?svelte&type=style&lang.css, /src/app.css[22m















[1;1H[0J[2m4:44:27 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m
[36m4:44:46 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/ChatMessage.svelte:41:4 Screenreaders already announce `<img>` elements as an image
https://svelte.dev/e/a11y_img_redundant_alt[39m















[1;1H[0J[2m4:44:46 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatMessage.svelte, /src/app.css[22m















[1;1H[0J[2m4:44:46 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatMessage.svelte[22m
[36m4:44:46 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/ChatMessage.svelte:41:4 Screenreaders already announce `<img>` elements as an image
https://svelte.dev/e/a11y_img_redundant_alt[39m
[36m4:44:56 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/ChatMessage.svelte:41:4 Screenreaders already announce `<img>` elements as an image
https://svelte.dev/e/a11y_img_redundant_alt[39m















[1;1H[0J[2m4:44:56 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatMessage.svelte?svelte&type=style&lang.css, /src/app.css[22m















[1;1H[0J[2m4:44:56 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatMessage.svelte[22m















[1;1H[0J[2m4:45:11 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:45:11 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:45:20 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:45:20 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:45:28 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:45:28 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:45:34 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:45:34 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
[36m4:45:54 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/ChatMessage.svelte:41:4 Screenreaders already announce `<img>` elements as an image
https://svelte.dev/e/a11y_img_redundant_alt[39m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/0.js[22m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/1.js[22m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/6.js[22m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/8.js[22m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/app.js[22m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/matchers.js[22m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/server/internal.js[22m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/root.js[22m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/root.js[22m [33m(x2)[39m















[1;1H[0J[2m4:45:56 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/root.svelte[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 3 total, sending last 3 to model
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model















[1;1H[0J[2m4:48:26 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:48:26 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:48:41 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:48:41 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:49:19 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:49:19 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:49:46 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:49:46 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:51:54 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:51:54 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:52:05 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:52:05 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:52:17 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatMessage.svelte, /src/app.css[22m















[1;1H[0J[2m4:52:17 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatMessage.svelte[22m















[1;1H[0J[2m4:52:24 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m4:52:24 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/api/projects/[id]/chat-images/+server.ts[22m















[1;1H[0J[2m4:52:35 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m4:52:35 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m















[1;1H[0J[2m4:52:43 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte, /src/app.css[22m















[1;1H[0J[2m4:52:43 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m















[1;1H[0J[2m4:52:51 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m4:52:51 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:53:01 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m4:53:01 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/0.js[22m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/1.js[22m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/6.js[22m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/8.js[22m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/app.js[22m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/matchers.js[22m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/server/internal.js[22m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/root.js[22m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/root.js[22m [33m(x2)[39m















[1;1H[0J[2m4:53:11 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/root.svelte[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model
InvalidPromptError [AI_InvalidPromptError]: Invalid prompt: The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.
    at standardizePrompt (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1594:11)
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5626:31)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: _TypeValidationError [AI_TypeValidationError]: Type validation failed: Value: [{"role":"user","content":[{"type":"file","mediaType":"image/jpeg"},{"type":"text","text":"describe this"}]}].
  Error message: [
    {
      "code": "invalid_union",
      "errors": [
        [
          {
            "code": "invalid_value",
            "values": [
              "system"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"system\""
          },
          {
            "expected": "string",
            "code": "invalid_type",
            "path": [
              "content"
            ],
            "message": "Invalid input: expected string, received array"
          }
        ],
        [
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received array"
                }
              ],
              [
                {
                  "code": "invalid_union",
                  "errors": [
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "text"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"text\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "text"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "image"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"image\""
                      },
                      {
                        "code": "invalid_union",
                        "errors": [
                          [
                            {
                              "code": "invalid_union",
                              "errors": [
                                [
                                  {
                                    "expected": "string",
                                    "code": "invalid_type",
                                    "path": [],
                                    "message": "Invalid input: expected string, received undefined"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of Uint8Array"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of ArrayBuffer"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Must be a Buffer"
                                  }
                                ]
                              ],
                              "path": [],
                              "message": "Invalid input"
                            }
                          ],
                          [
                            {
                              "code": "custom",
                              "path": [],
                              "message": "Input not instance of URL"
                            }
                          ]
                        ],
                        "path": [
                          "image"
                        ],
                        "message": "Invalid input"
                      }
                    ],
                    [
                      {
                        "code": "invalid_union",
                        "errors": [
                          [
                            {
                              "code": "invalid_union",
                              "errors": [
                                [
                                  {
                                    "expected": "string",
                                    "code": "invalid_type",
                                    "path": [],
                                    "message": "Invalid input: expected string, received undefined"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of Uint8Array"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of ArrayBuffer"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Must be a Buffer"
                                  }
                                ]
                              ],
                              "path": [],
                              "message": "Invalid input"
                            }
                          ],
                          [
                            {
                              "code": "custom",
                              "path": [],
                              "message": "Input not instance of URL"
                            }
                          ]
                        ],
                        "path": [
                          "data"
                        ],
                        "message": "Invalid input"
                      }
                    ]
                  ],
                  "path": [
                    0
                  ],
                  "message": "Invalid input"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "assistant"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"assistant\""
          },
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received array"
                }
              ],
              [
                {
                  "code": "invalid_union",
                  "errors": [
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "text"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"text\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "text"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_union",
                        "errors": [
                          [
                            {
                              "code": "invalid_union",
                              "errors": [
                                [
                                  {
                                    "expected": "string",
                                    "code": "invalid_type",
                                    "path": [],
                                    "message": "Invalid input: expected string, received undefined"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of Uint8Array"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of ArrayBuffer"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Must be a Buffer"
                                  }
                                ]
                              ],
                              "path": [],
                              "message": "Invalid input"
                            }
                          ],
                          [
                            {
                              "code": "custom",
                              "path": [],
                              "message": "Input not instance of URL"
                            }
                          ]
                        ],
                        "path": [
                          "data"
                        ],
                        "message": "Invalid input"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "reasoning"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"reasoning\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "text"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "tool-call"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"tool-call\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolCallId"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolName"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "tool-result"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"tool-result\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolCallId"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolName"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      },
                      {
                        "code": "invalid_type",
                        "expected": "object",
                        "path": [
                          "output"
                        ],
                        "message": "Invalid input: expected object, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "tool-approval-request"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"tool-approval-request\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "approvalId"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolCallId"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ]
                  ],
                  "path": [
                    0
                  ],
                  "message": "Invalid input"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "tool"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"tool\""
          },
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "code": "invalid_value",
                  "values": [
                    "tool-result"
                  ],
                  "path": [
                    "type"
                  ],
                  "message": "Invalid input: expected \"tool-result\""
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "toolCallId"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "toolName"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "code": "invalid_type",
                  "expected": "object",
                  "path": [
                    "output"
                  ],
                  "message": "Invalid input: expected object, received undefined"
                }
              ],
              [
                {
                  "code": "invalid_value",
                  "values": [
                    "tool-approval-response"
                  ],
                  "path": [
                    "type"
                  ],
                  "message": "Invalid input: expected \"tool-approval-response\""
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "approvalId"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "expected": "boolean",
                  "code": "invalid_type",
                  "path": [
                    "approved"
                  ],
                  "message": "Invalid input: expected boolean, received undefined"
                }
              ]
            ],
            "path": [
              "content",
              0
            ],
            "message": "Invalid input"
          },
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "code": "invalid_value",
                  "values": [
                    "tool-result"
                  ],
                  "path": [
                    "type"
                  ],
                  "message": "Invalid input: expected \"tool-result\""
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "toolCallId"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "toolName"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "code": "invalid_type",
                  "expected": "object",
                  "path": [
                    "output"
                  ],
                  "message": "Invalid input: expected object, received undefined"
                }
              ],
              [
                {
                  "code": "invalid_value",
                  "values": [
                    "tool-approval-response"
                  ],
                  "path": [
                    "type"
                  ],
                  "message": "Invalid input: expected \"tool-approval-response\""
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "approvalId"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "expected": "boolean",
                  "code": "invalid_type",
                  "path": [
                    "approved"
                  ],
                  "message": "Invalid input: expected boolean, received undefined"
                }
              ]
            ],
            "path": [
              "content",
              1
            ],
            "message": "Invalid input"
          }
        ]
      ],
      "path": [
        0
      ],
      "message": "Invalid input"
    }
  ]
      at _TypeValidationError.wrap (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider@3.0.0-beta.15/node_modules/[4m@ai-sdk[24m/provider/dist/index.mjs:311:86)
      at safeValidateTypes (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@4.0.0-beta.31_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:1869:35)
  [90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
      at async standardizePrompt (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1589:28)
      at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5626:31)
      at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
    cause: ZodError: [
      {
        "code": "invalid_union",
        "errors": [
          [
            {
              "code": "invalid_value",
              "values": [
                "system"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"system\""
            },
            {
              "expected": "string",
              "code": "invalid_type",
              "path": [
                "content"
              ],
              "message": "Invalid input: expected string, received array"
            }
          ],
          [
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received array"
                  }
                ],
                [
                  {
                    "code": "invalid_union",
                    "errors": [
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "text"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"text\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "text"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "image"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"image\""
                        },
                        {
                          "code": "invalid_union",
                          "errors": [
                            [
                              {
                                "code": "invalid_union",
                                "errors": [
                                  [
                                    {
                                      "expected": "string",
                                      "code": "invalid_type",
                                      "path": [],
                                      "message": "Invalid input: expected string, received undefined"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of Uint8Array"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of ArrayBuffer"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Must be a Buffer"
                                    }
                                  ]
                                ],
                                "path": [],
                                "message": "Invalid input"
                              }
                            ],
                            [
                              {
                                "code": "custom",
                                "path": [],
                                "message": "Input not instance of URL"
                              }
                            ]
                          ],
                          "path": [
                            "image"
                          ],
                          "message": "Invalid input"
                        }
                      ],
                      [
                        {
                          "code": "invalid_union",
                          "errors": [
                            [
                              {
                                "code": "invalid_union",
                                "errors": [
                                  [
                                    {
                                      "expected": "string",
                                      "code": "invalid_type",
                                      "path": [],
                                      "message": "Invalid input: expected string, received undefined"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of Uint8Array"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of ArrayBuffer"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Must be a Buffer"
                                    }
                                  ]
                                ],
                                "path": [],
                                "message": "Invalid input"
                              }
                            ],
                            [
                              {
                                "code": "custom",
                                "path": [],
                                "message": "Input not instance of URL"
                              }
                            ]
                          ],
                          "path": [
                            "data"
                          ],
                          "message": "Invalid input"
                        }
                      ]
                    ],
                    "path": [
                      0
                    ],
                    "message": "Invalid input"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "assistant"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"assistant\""
            },
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received array"
                  }
                ],
                [
                  {
                    "code": "invalid_union",
                    "errors": [
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "text"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"text\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "text"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_union",
                          "errors": [
                            [
                              {
                                "code": "invalid_union",
                                "errors": [
                                  [
                                    {
                                      "expected": "string",
                                      "code": "invalid_type",
                                      "path": [],
                                      "message": "Invalid input: expected string, received undefined"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of Uint8Array"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of ArrayBuffer"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Must be a Buffer"
                                    }
                                  ]
                                ],
                                "path": [],
                                "message": "Invalid input"
                              }
                            ],
                            [
                              {
                                "code": "custom",
                                "path": [],
                                "message": "Input not instance of URL"
                              }
                            ]
                          ],
                          "path": [
                            "data"
                          ],
                          "message": "Invalid input"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "reasoning"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"reasoning\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "text"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "tool-call"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"tool-call\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolCallId"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolName"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "tool-result"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"tool-result\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolCallId"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolName"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        },
                        {
                          "code": "invalid_type",
                          "expected": "object",
                          "path": [
                            "output"
                          ],
                          "message": "Invalid input: expected object, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "tool-approval-request"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"tool-approval-request\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "approvalId"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolCallId"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ]
                    ],
                    "path": [
                      0
                    ],
                    "message": "Invalid input"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "tool"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"tool\""
            },
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "code": "invalid_value",
                    "values": [
                      "tool-result"
                    ],
                    "path": [
                      "type"
                    ],
                    "message": "Invalid input: expected \"tool-result\""
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "toolCallId"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "toolName"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "code": "invalid_type",
                    "expected": "object",
                    "path": [
                      "output"
                    ],
                    "message": "Invalid input: expected object, received undefined"
                  }
                ],
                [
                  {
                    "code": "invalid_value",
                    "values": [
                      "tool-approval-response"
                    ],
                    "path": [
                      "type"
                    ],
                    "message": "Invalid input: expected \"tool-approval-response\""
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "approvalId"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "expected": "boolean",
                    "code": "invalid_type",
                    "path": [
                      "approved"
                    ],
                    "message": "Invalid input: expected boolean, received undefined"
                  }
                ]
              ],
              "path": [
                "content",
                0
              ],
              "message": "Invalid input"
            },
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "code": "invalid_value",
                    "values": [
                      "tool-result"
                    ],
                    "path": [
                      "type"
                    ],
                    "message": "Invalid input: expected \"tool-result\""
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "toolCallId"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "toolName"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "code": "invalid_type",
                    "expected": "object",
                    "path": [
                      "output"
                    ],
                    "message": "Invalid input: expected object, received undefined"
                  }
                ],
                [
                  {
                    "code": "invalid_value",
                    "values": [
                      "tool-approval-response"
                    ],
                    "path": [
                      "type"
                    ],
                    "message": "Invalid input: expected \"tool-approval-response\""
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "approvalId"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "expected": "boolean",
                    "code": "invalid_type",
                    "path": [
                      "approved"
                    ],
                    "message": "Invalid input: expected boolean, received undefined"
                  }
                ]
              ],
              "path": [
                "content",
                1
              ],
              "message": "Invalid input"
            }
          ]
        ],
        "path": [
          0
        ],
        "message": "Invalid input"
      }
    ]
        at new ZodError (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/zod@4.1.12/node_modules/[4mzod[24m/v4/core/core.js:30:39)
        at Module.<anonymous> (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/zod@4.1.12/node_modules/[4mzod[24m/v4/core/parse.js:53:20)
        at Object.validate (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@4.0.0-beta.31_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:1826:33)
        at safeValidateTypes (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@4.0.0-beta.31_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:1863:39)
        at standardizePrompt (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1589:34)
        at fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5626:37)
        at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:30
        at Object.startActiveSpan (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1685:14)
        at recordSpan (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1756:17)
    [90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m,
    value: [ [36m[Object][39m ],
    [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
    [[32mSymbol(vercel.ai.error.AI_TypeValidationError)[39m]: [33mtrue[39m
  },
  prompt: {
    system: [32m'You are a friendly Phaser 3 game coding teacher helping kids create their first games! ðŸŽ®\n'[39m +
      [32m'\n'[39m +
      [32m'YOUR TEACHING STYLE:\n'[39m +
      [32m'- Be SUPER encouraging and positive! Every question is a great question!\n'[39m +
      [32m"- Explain things simply, like you're talking to a curious 10-year-old\n"[39m +
      [32m'- Use fun analogies (e.g., "scenes are like different levels in Mario")\n'[39m +
      [32m'- Break down complex ideas into bite-sized pieces\n'[39m +
      [32m'- Celebrate their progress and creativity!\n'[39m +
      [32m'\n'[39m +
      [32m'HOW TO HELP:\n'[39m +
      [32m"1. ALWAYS read files first before making changes (so you know what's there!)\n"[39m +
      [32m'2. Explain what the current code does in simple terms\n'[39m +
      [32m'3. Suggest ONE small improvement at a time (baby steps = better learning!)\n'[39m +
      [32m`4. Use fun examples: "Let's make the player jump higher like Mario!"\n`[39m +
      [32m'5. Teach WHY something works, not just HOW\n'[39m +
      [32m'\n'[39m +
      [32m'Ensure you make small incremental steps at a time.\n'[39m +
      [32m'Ensure the child can see progress immediately to accelerate feedback loop.\n'[39m +
      [32m'Ask clarifying questions for large/complex/ambigous tasks after breaking it down.\n'[39m +
      [32m'\n'[39m +
      [32m"Remember: You're not just writing code - you're teaching kids how to bring their game ideas to life! Make it FUN! ðŸš€\n"[39m +
      [32m'\n'[39m +
      [32m'---\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'DEBUGGING PROTOCOL (Follow strictly for ALL bug fixes):\n'[39m +
      [32m'\n'[39m +
      [32m'1. READ FIRST - ALWAYS use readFile() before fixing bugs\n'[39m +
      [32m'   â€¢ Never guess at code structure\n'[39m +
      [32m'   â€¢ Read the FULL file to understand context\n'[39m +
      [32m'   â€¢ Check related files if needed\n'[39m +
      [32m'\n'[39m +
      [32m'2. CHECK CONSOLE - Use getConsoleLogs() to see runtime errors and gameAPI.log() output\n'[39m +
      [32m'   â€¢ Look for "X is not a function" errors\n'[39m +
      [32m'   â€¢ Check if expected logs are missing (callback not firing)\n'[39m +
      [32m'   â€¢ Use logs to verify code execution flow\n'[39m +
      [32m'\n'[39m +
      [32m'3. COMMON PHASER 3 BUGS - Check these patterns first:\n'[39m +
      [32m'\n'[39m +
      [32m'   ðŸ”´ CALLBACK DEFINED AFTER REGISTRATION:\n'[39m +
      [32m'   Problem: Phaser captures callback by reference at registration time\n'[39m +
      [32m'   âŒ WRONG:\n'[39m +
      [32m'      scene.physics.add.overlap(a, b, this.collectCoin);  // this.collectCoin is undefined!\n'[39m +
      [32m'      this.collectCoin = () => { /* ... */ };             // Defined too late\n'[39m +
      [32m'\n'[39m +
      [32m'   âœ… CORRECT:\n'[39m +
      [32m'      this.collectCoin = () => { /* ... */ };             // Define FIRST\n'[39m +
      [32m'      scene.physics.add.overlap(a, b, this.collectCoin);  // Then register\n'[39m +
      [32m'\n'[39m +
      [32m'   ðŸ”´ PHYSICS BODY POSITION MISMATCH:\n'[39m +
      [32m'   Problem: Physics bodies use CENTER positioning, Graphics use TOP-LEFT\n'[39m +
      [32m'   âŒ WRONG:\n'[39m +
      [32m'      this.platforms.create(400, 580, null).setSize(800, 40);  // Center at Y=580\n'[39m +
      [32m'      graphics.fillRect(0, 560, 800, 40);  // Top-left at Y=560\n'[39m +
      [32m'      // Result: 20px gap causes collision bugs!\n'[39m +
      [32m'\n'[39m +
      [32m'   âœ… CORRECT:\n'[39m +
      [32m'      this.platforms.create(400, 560, null).setOrigin(0.5, 0).setSize(800, 40);  // Top at Y=560\n'[39m +
      [32m'      graphics.fillRect(0, 560, 800, 40);  // Aligned!\n'[39m +
      [32m'\n'[39m +
      [32m'4. ROOT CAUSE ANALYSIS - Use error taxonomy:\n'[39m +
      [32m'   â€¢ "X is not a function" â†’ 90% callback defined after registration OR scope issue\n'[39m +
      [32m'   â€¢ "Cannot read property Y of undefined" â†’ initialization order problem\n'[39m +
      [32m'   â€¢ "X is not defined" â†’ typo or missing variable\n'[39m +
      [32m'   â€¢ Silent failures (no error) â†’ callback not registered or wrong event name\n'[39m +
      [32m'   â€¢ Ask "WHY?" 3 times to find the real cause, not just symptoms\n'[39m +
      [32m'\n'[39m +
      [32m'5. EXPLAIN BEFORE FIXING - Use this format:\n'[39m +
      [32m'   [1 sentence] "Found it! The callback is defined after registration."\n'[39m +
      [32m'   [2 sentences] "Phaser captures the reference when you call overlap(), but at that moment..."\n'[39m +
      [32m'   [Code block] Show the fix\n'[39m +
      [32m'   [1 sentence] "This works because now the callback exists before registration!"\n'[39m +
      [32m'\n'[39m +
      [32m'6. ONE CHANGE AT A TIME\n'[39m +
      [32m'   â€¢ Fix ONE bug â†’ let user test â†’ next bug\n'[39m +
      [32m'   â€¢ Add ONE feature â†’ verify it works â†’ next feature\n'[39m +
      [32m'   â€¢ Never rewrite entire files unless explicitly requested\n'[39m +
      [32m'\n'[39m +
      [32m"RED FLAGS - Stop and reconsider if you're about to:\n"[39m +
      [32m'âŒ Fix code without reading the file first\n'[39m +
      [32m'âŒ Fix code without checking console logs\n'[39m +
      [32m'âŒ Make multiple unrelated changes at once\n'[39m +
      [32m'âŒ Propose changes without explaining WHY they work\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'---\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'PLATFORM ARCHITECTURE RULES:\n'[39m +
      [32m'\n'[39m +
      [32m'âš ï¸ CRITICAL: Understanding `this` in Scene Methods\n'[39m +
      [32m'\n'[39m +
      [32m'In our platform, `this` inside scene lifecycle methods (create, update) refers to a\n'[39m +
      [32m'PERSISTENT STATE OBJECT, not the scene definition object.\n'[39m +
      [32m'\n'[39m +
      [32m'âŒ COMMON MISTAKE (causes "X is not a function" errors):\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'window.scenes = {\n'[39m +
      [32m'  Game: {\n'[39m +
      [32m'    create(scene) {\n'[39m +
      [32m'      this.helper(scene);  // âŒ ERROR: helper is not a function!\n'[39m +
      [32m'    },\n'[39m +
      [32m'    helper(scene) {  // âŒ This is NOT on `this`!\n'[39m +
      [32m"      scene.add.text(100, 100, 'Hello');\n"[39m +
      [32m'    }\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… SOLUTION 1 - Local function (for one-time use in create):\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'create(scene) {\n'[39m +
      [32m'  const helper = (scene) => { /* code */ };  // âœ… Local function\n'[39m +
      [32m'  helper(scene);  // âœ… Works!\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… SOLUTION 2 - Store on `this` (for use in create AND update):\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'create(scene) {\n'[39m +
      [32m'  this.helper = (scene) => { /* code */ };  // âœ… On state object\n'[39m +
      [32m'  this.helper(scene);  // âœ… Works!\n'[39m +
      [32m'},\n'[39m +
      [32m'update(scene) {\n'[39m +
      [32m'  this.helper(scene);  // âœ… Also works here!\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'QUICK DECISION TREE:\n'[39m +
      [32m'â€¢ One-time setup helper â†’ `const helper = () => {}`\n'[39m +
      [32m'â€¢ Shared between create/update â†’ `this.helper = () => {}`\n'[39m +
      [32m'â€¢ Reusable across scenes â†’ Suggest separate /src/utils/ file\n'[39m +
      [32m'\n'[39m +
      [32m'CODE ORGANIZATION:\n'[39m +
      [32m"â€¢ File < 300 lines â†’ Keep in one file (don't over-engineer!)\n"[39m +
      [32m'â€¢ File 300-500 lines â†’ Suggest splitting by scene\n'[39m +
      [32m'â€¢ File > 500 lines â†’ Suggest entity + utility splitting\n'[39m +
      [32m'â€¢ Repeated code 3+ times â†’ Extract to helper function\n'[39m +
      [32m'\n'[39m +
      [32m'MULTIPLAYER - ALWAYS ENABLED (CRITICAL):\n'[39m +
      [32m'Our platform has ALWAYS-ON MULTIPLAYER. Every game starts in multiplayer mode (either real P2P or solo mock).\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… GUARANTEED TRUTHS:\n'[39m +
      [32m'- getMyId() ALWAYS returns a string (never null)\n'[39m +
      [32m'- isHost() ALWAYS returns boolean (true by default)\n'[39m +
      [32m'- Multiplayer is active from the moment the game loads\n'[39m +
      [32m'- No need to check "is multiplayer enabled" - it always is\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… CORRECT USAGE - getMyId() always returns a string:\n'[39m +
      [32m'  const myId = gameAPI.multiplayer.getMyId(); // Always a string\n'[39m +
      [32m'  const role = roles[parseInt(myId) % 4];     // Works perfectly\n'[39m +
      [32m'\n'[39m +
      [32m'âŒ NEVER DO THIS - no null checks needed:\n'[39m +
      [32m'  if (playerId === null) { ... }              // playerId is never null\n'[39m +
      [32m"  const myId = getMyId() || 'default';        // No need for fallback\n"[39m +
      [32m'  if (!multiplayer._enabled) { ... }          // Always enabled\n'[39m +
      [32m'\n'[39m +
      [32m'MULTIPLAYER RED FLAGS:\n'[39m +
      [32m'âŒ Spawning without gameAPI.multiplayer.isHost() check\n'[39m +
      [32m"âŒ Not broadcasting spawn events (non-host players won't see objects!)\n"[39m +
      [32m'âŒ Event listeners in update() (should be in create)\n'[39m +
      [32m'âŒ this.method() where method is a peer (see above)\n'[39m +
      [32m"âŒ Any null checks on getMyId() - it's always a string!\n"[39m +
      [32m'âŒ Auto-assigning roles without asking if players should choose\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… Ask about player choice before auto-assigning:\n'[39m +
      [32m'When you see multiplayer roles/characters being assigned, ask:\n'[39m +
      [32m'"Should players pick their character in a selection screen, or auto-assign based on join order?"\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'---\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'GAME DESIGN PATTERNS (Ask clarifying questions when these apply):\n'[39m +
      [32m'\n'[39m +
      [32m'ðŸŽ® CHARACTER SELECTION\n'[39m +
      [32m'When user mentions: "multiplayer", "choose character", "different roles", "4 players"\n'[39m +
      [32m'ASK: "Should players pick their character, or auto-assign them?"\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… GOOD PATTERN - Character Selection Scene:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'CharacterSelect: {\n'[39m +
      [32m'  create(scene) {\n'[39m +
      [32m'    // Store selected character in state\n'[39m +
      [32m'    this.selectedCharacter = null;\n'[39m +
      [32m'\n'[39m +
      [32m'    // Show character options (fire, water, air, earth)\n'[39m +
      [32m"    const characters = ['fireboy', 'watergirl', 'airboy', 'earthgirl'];\n"[39m +
      [32m'    characters.forEach((char, i) => {\n'[39m +
      [32m'      const btn = scene.add.text(100 + i * 150, 300, char);\n'[39m +
      [32m'      btn.setInteractive();\n'[39m +
      [32m"      btn.on('pointerdown', () => {\n"[39m +
      [32m'        this.selectedCharacter = char;\n'[39m +
      [32m"        gameAPI.switchScene('Game', { character: char });\n"[39m +
      [32m'      });\n'[39m +
      [32m'    });\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'âŒ BAD PATTERN - Auto-assign based on player ID math:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m"// âŒ Don't do this - no player choice!\n"[39m +
      [32m'const playerId = gameAPI.multiplayer.getMyId();\n'[39m +
      [32m'const role = roles[parseInt(playerId) % 4]; // Player has no control\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'ðŸŽ® MULTIPLAYER LOBBIES\n'[39m +
      [32m'When user mentions: "multiplayer", "wait for players", "ready up"\n'[39m +
      [32m'ASK: "Do you want a lobby where players can ready up before the game starts?"\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… GOOD PATTERN - Lobby with Ready System:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'Lobby: {\n'[39m +
      [32m'  create(scene) {\n'[39m +
      [32m'    this.playersReady = {};\n'[39m +
      [32m'\n'[39m +
      [32m'    // Ready button\n'[39m +
      [32m"    const readyBtn = scene.add.text(400, 400, 'READY').setInteractive();\n"[39m +
      [32m"    readyBtn.on('pointerdown', () => {\n"[39m +
      [32m'      const myId = gameAPI.multiplayer.getMyId();\n'[39m +
      [32m"      gameAPI.multiplayer.broadcast('player-ready', { playerId: myId });\n"[39m +
      [32m'    });\n'[39m +
      [32m'\n'[39m +
      [32m'    // Listen for ready events\n'[39m +
      [32m"    gameAPI.multiplayer.on('player-ready', (data) => {\n"[39m +
      [32m'      this.playersReady[data.playerId] = true;\n'[39m +
      [32m'      // If all ready, start game\n'[39m +
      [32m'      if (Object.keys(this.playersReady).length >= 2) {\n'[39m +
      [32m"        gameAPI.switchScene('Game');\n"[39m +
      [32m'      }\n'[39m +
      [32m'    });\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'ðŸŽ® LEVEL PROGRESSION\n'[39m +
      [32m'When user mentions: "multiple levels", "next level", "level 2"\n'[39m +
      [32m'ASK: "How should players advance to the next level? Automatically or with a button?"\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… GOOD PATTERN - Pass level data between scenes:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'// Game scene receives level number\n'[39m +
      [32m'Game: {\n'[39m +
      [32m'  create(scene, data) {\n'[39m +
      [32m'    this.level = data.level || 1; // Default to level 1\n'[39m +
      [32m'    // ... create level based on this.level\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'\n'[39m +
      [32m'// Victory scene advances to next level\n'[39m +
      [32m'Victory: {\n'[39m +
      [32m'  create(scene, data) {\n'[39m +
      [32m"    const nextBtn = scene.add.text(400, 400, 'Next Level').setInteractive();\n"[39m +
      [32m"    nextBtn.on('pointerdown', () => {\n"[39m +
      [32m"      gameAPI.switchScene('Game', { level: data.level + 1 });\n"[39m +
      [32m'    });\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'ðŸŽ® HOST-ONLY SPAWNING (CRITICAL MULTIPLAYER PATTERN)\n'[39m +
      [32m'\n'[39m +
      [32m'**THE GOLDEN RULE: Only the host spawns game objects. Host broadcasts spawn events to all players.**\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… CORRECT PATTERN - Host spawns and broadcasts:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'create(scene) {\n'[39m +
      [32m'  // Host spawns all game objects\n'[39m +
      [32m'  if (gameAPI.multiplayer.isHost()) {\n'[39m +
      [32m'    for (let i = 0; i < 5; i++) {\n'[39m +
      [32m'      const x = Math.random() * 800;\n'[39m +
      [32m"      const enemy = scene.add.sprite(x, 100, 'enemy');\n"[39m +
      [32m'      this.enemies.push(enemy);\n'[39m +
      [32m'\n'[39m +
      [32m'      // Broadcast to all players\n'[39m +
      [32m"      gameAPI.multiplayer.broadcast('spawn-enemy', { id: i, x, y: 100 });\n"[39m +
      [32m'    }\n'[39m +
      [32m'  }\n'[39m +
      [32m'\n'[39m +
      [32m'  // All players (including host) listen for spawn events\n'[39m +
      [32m"  gameAPI.multiplayer.on('spawn-enemy', (peerId, data) => {\n"[39m +
      [32m'    if (!gameAPI.multiplayer.isHost()) {\n'[39m +
      [32m"      const enemy = scene.add.sprite(data.x, data.y, 'enemy');\n"[39m +
      [32m'      enemy.enemyId = data.id;\n'[39m +
      [32m'      this.enemies.push(enemy);\n'[39m +
      [32m'    }\n'[39m +
      [32m'  });\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'âŒ WRONG PATTERN - Everyone '[39m... 18569 more characters,
    prompt: [90mundefined[39m,
    messages: [ [36m[Object][39m ]
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_InvalidPromptError)[39m]: [33mtrue[39m
}
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model
InvalidPromptError [AI_InvalidPromptError]: Invalid prompt: The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.
    at standardizePrompt (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1594:11)
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5626:31)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: _TypeValidationError [AI_TypeValidationError]: Type validation failed: Value: [{"role":"user","content":[{"type":"file","mediaType":"image/jpeg"},{"type":"text","text":"describt this"}]}].
  Error message: [
    {
      "code": "invalid_union",
      "errors": [
        [
          {
            "code": "invalid_value",
            "values": [
              "system"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"system\""
          },
          {
            "expected": "string",
            "code": "invalid_type",
            "path": [
              "content"
            ],
            "message": "Invalid input: expected string, received array"
          }
        ],
        [
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received array"
                }
              ],
              [
                {
                  "code": "invalid_union",
                  "errors": [
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "text"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"text\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "text"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "image"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"image\""
                      },
                      {
                        "code": "invalid_union",
                        "errors": [
                          [
                            {
                              "code": "invalid_union",
                              "errors": [
                                [
                                  {
                                    "expected": "string",
                                    "code": "invalid_type",
                                    "path": [],
                                    "message": "Invalid input: expected string, received undefined"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of Uint8Array"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of ArrayBuffer"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Must be a Buffer"
                                  }
                                ]
                              ],
                              "path": [],
                              "message": "Invalid input"
                            }
                          ],
                          [
                            {
                              "code": "custom",
                              "path": [],
                              "message": "Input not instance of URL"
                            }
                          ]
                        ],
                        "path": [
                          "image"
                        ],
                        "message": "Invalid input"
                      }
                    ],
                    [
                      {
                        "code": "invalid_union",
                        "errors": [
                          [
                            {
                              "code": "invalid_union",
                              "errors": [
                                [
                                  {
                                    "expected": "string",
                                    "code": "invalid_type",
                                    "path": [],
                                    "message": "Invalid input: expected string, received undefined"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of Uint8Array"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of ArrayBuffer"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Must be a Buffer"
                                  }
                                ]
                              ],
                              "path": [],
                              "message": "Invalid input"
                            }
                          ],
                          [
                            {
                              "code": "custom",
                              "path": [],
                              "message": "Input not instance of URL"
                            }
                          ]
                        ],
                        "path": [
                          "data"
                        ],
                        "message": "Invalid input"
                      }
                    ]
                  ],
                  "path": [
                    0
                  ],
                  "message": "Invalid input"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "assistant"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"assistant\""
          },
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received array"
                }
              ],
              [
                {
                  "code": "invalid_union",
                  "errors": [
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "text"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"text\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "text"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_union",
                        "errors": [
                          [
                            {
                              "code": "invalid_union",
                              "errors": [
                                [
                                  {
                                    "expected": "string",
                                    "code": "invalid_type",
                                    "path": [],
                                    "message": "Invalid input: expected string, received undefined"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of Uint8Array"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Input not instance of ArrayBuffer"
                                  }
                                ],
                                [
                                  {
                                    "code": "custom",
                                    "path": [],
                                    "message": "Must be a Buffer"
                                  }
                                ]
                              ],
                              "path": [],
                              "message": "Invalid input"
                            }
                          ],
                          [
                            {
                              "code": "custom",
                              "path": [],
                              "message": "Input not instance of URL"
                            }
                          ]
                        ],
                        "path": [
                          "data"
                        ],
                        "message": "Invalid input"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "reasoning"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"reasoning\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "text"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "tool-call"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"tool-call\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolCallId"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolName"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "tool-result"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"tool-result\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolCallId"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolName"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      },
                      {
                        "code": "invalid_type",
                        "expected": "object",
                        "path": [
                          "output"
                        ],
                        "message": "Invalid input: expected object, received undefined"
                      }
                    ],
                    [
                      {
                        "code": "invalid_value",
                        "values": [
                          "tool-approval-request"
                        ],
                        "path": [
                          "type"
                        ],
                        "message": "Invalid input: expected \"tool-approval-request\""
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "approvalId"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      },
                      {
                        "expected": "string",
                        "code": "invalid_type",
                        "path": [
                          "toolCallId"
                        ],
                        "message": "Invalid input: expected string, received undefined"
                      }
                    ]
                  ],
                  "path": [
                    0
                  ],
                  "message": "Invalid input"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "tool"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"tool\""
          },
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "code": "invalid_value",
                  "values": [
                    "tool-result"
                  ],
                  "path": [
                    "type"
                  ],
                  "message": "Invalid input: expected \"tool-result\""
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "toolCallId"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "toolName"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "code": "invalid_type",
                  "expected": "object",
                  "path": [
                    "output"
                  ],
                  "message": "Invalid input: expected object, received undefined"
                }
              ],
              [
                {
                  "code": "invalid_value",
                  "values": [
                    "tool-approval-response"
                  ],
                  "path": [
                    "type"
                  ],
                  "message": "Invalid input: expected \"tool-approval-response\""
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "approvalId"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "expected": "boolean",
                  "code": "invalid_type",
                  "path": [
                    "approved"
                  ],
                  "message": "Invalid input: expected boolean, received undefined"
                }
              ]
            ],
            "path": [
              "content",
              0
            ],
            "message": "Invalid input"
          },
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "code": "invalid_value",
                  "values": [
                    "tool-result"
                  ],
                  "path": [
                    "type"
                  ],
                  "message": "Invalid input: expected \"tool-result\""
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "toolCallId"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "toolName"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "code": "invalid_type",
                  "expected": "object",
                  "path": [
                    "output"
                  ],
                  "message": "Invalid input: expected object, received undefined"
                }
              ],
              [
                {
                  "code": "invalid_value",
                  "values": [
                    "tool-approval-response"
                  ],
                  "path": [
                    "type"
                  ],
                  "message": "Invalid input: expected \"tool-approval-response\""
                },
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [
                    "approvalId"
                  ],
                  "message": "Invalid input: expected string, received undefined"
                },
                {
                  "expected": "boolean",
                  "code": "invalid_type",
                  "path": [
                    "approved"
                  ],
                  "message": "Invalid input: expected boolean, received undefined"
                }
              ]
            ],
            "path": [
              "content",
              1
            ],
            "message": "Invalid input"
          }
        ]
      ],
      "path": [
        0
      ],
      "message": "Invalid input"
    }
  ]
      at _TypeValidationError.wrap (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider@3.0.0-beta.15/node_modules/[4m@ai-sdk[24m/provider/dist/index.mjs:311:86)
      at safeValidateTypes (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@4.0.0-beta.31_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:1869:35)
  [90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
      at async standardizePrompt (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1589:28)
      at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5626:31)
      at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
    cause: ZodError: [
      {
        "code": "invalid_union",
        "errors": [
          [
            {
              "code": "invalid_value",
              "values": [
                "system"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"system\""
            },
            {
              "expected": "string",
              "code": "invalid_type",
              "path": [
                "content"
              ],
              "message": "Invalid input: expected string, received array"
            }
          ],
          [
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received array"
                  }
                ],
                [
                  {
                    "code": "invalid_union",
                    "errors": [
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "text"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"text\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "text"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "image"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"image\""
                        },
                        {
                          "code": "invalid_union",
                          "errors": [
                            [
                              {
                                "code": "invalid_union",
                                "errors": [
                                  [
                                    {
                                      "expected": "string",
                                      "code": "invalid_type",
                                      "path": [],
                                      "message": "Invalid input: expected string, received undefined"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of Uint8Array"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of ArrayBuffer"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Must be a Buffer"
                                    }
                                  ]
                                ],
                                "path": [],
                                "message": "Invalid input"
                              }
                            ],
                            [
                              {
                                "code": "custom",
                                "path": [],
                                "message": "Input not instance of URL"
                              }
                            ]
                          ],
                          "path": [
                            "image"
                          ],
                          "message": "Invalid input"
                        }
                      ],
                      [
                        {
                          "code": "invalid_union",
                          "errors": [
                            [
                              {
                                "code": "invalid_union",
                                "errors": [
                                  [
                                    {
                                      "expected": "string",
                                      "code": "invalid_type",
                                      "path": [],
                                      "message": "Invalid input: expected string, received undefined"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of Uint8Array"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of ArrayBuffer"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Must be a Buffer"
                                    }
                                  ]
                                ],
                                "path": [],
                                "message": "Invalid input"
                              }
                            ],
                            [
                              {
                                "code": "custom",
                                "path": [],
                                "message": "Input not instance of URL"
                              }
                            ]
                          ],
                          "path": [
                            "data"
                          ],
                          "message": "Invalid input"
                        }
                      ]
                    ],
                    "path": [
                      0
                    ],
                    "message": "Invalid input"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "assistant"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"assistant\""
            },
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received array"
                  }
                ],
                [
                  {
                    "code": "invalid_union",
                    "errors": [
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "text"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"text\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "text"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_union",
                          "errors": [
                            [
                              {
                                "code": "invalid_union",
                                "errors": [
                                  [
                                    {
                                      "expected": "string",
                                      "code": "invalid_type",
                                      "path": [],
                                      "message": "Invalid input: expected string, received undefined"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of Uint8Array"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Input not instance of ArrayBuffer"
                                    }
                                  ],
                                  [
                                    {
                                      "code": "custom",
                                      "path": [],
                                      "message": "Must be a Buffer"
                                    }
                                  ]
                                ],
                                "path": [],
                                "message": "Invalid input"
                              }
                            ],
                            [
                              {
                                "code": "custom",
                                "path": [],
                                "message": "Input not instance of URL"
                              }
                            ]
                          ],
                          "path": [
                            "data"
                          ],
                          "message": "Invalid input"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "reasoning"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"reasoning\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "text"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "tool-call"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"tool-call\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolCallId"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolName"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "tool-result"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"tool-result\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolCallId"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolName"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        },
                        {
                          "code": "invalid_type",
                          "expected": "object",
                          "path": [
                            "output"
                          ],
                          "message": "Invalid input: expected object, received undefined"
                        }
                      ],
                      [
                        {
                          "code": "invalid_value",
                          "values": [
                            "tool-approval-request"
                          ],
                          "path": [
                            "type"
                          ],
                          "message": "Invalid input: expected \"tool-approval-request\""
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "approvalId"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        },
                        {
                          "expected": "string",
                          "code": "invalid_type",
                          "path": [
                            "toolCallId"
                          ],
                          "message": "Invalid input: expected string, received undefined"
                        }
                      ]
                    ],
                    "path": [
                      0
                    ],
                    "message": "Invalid input"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "tool"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"tool\""
            },
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "code": "invalid_value",
                    "values": [
                      "tool-result"
                    ],
                    "path": [
                      "type"
                    ],
                    "message": "Invalid input: expected \"tool-result\""
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "toolCallId"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "toolName"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "code": "invalid_type",
                    "expected": "object",
                    "path": [
                      "output"
                    ],
                    "message": "Invalid input: expected object, received undefined"
                  }
                ],
                [
                  {
                    "code": "invalid_value",
                    "values": [
                      "tool-approval-response"
                    ],
                    "path": [
                      "type"
                    ],
                    "message": "Invalid input: expected \"tool-approval-response\""
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "approvalId"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "expected": "boolean",
                    "code": "invalid_type",
                    "path": [
                      "approved"
                    ],
                    "message": "Invalid input: expected boolean, received undefined"
                  }
                ]
              ],
              "path": [
                "content",
                0
              ],
              "message": "Invalid input"
            },
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "code": "invalid_value",
                    "values": [
                      "tool-result"
                    ],
                    "path": [
                      "type"
                    ],
                    "message": "Invalid input: expected \"tool-result\""
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "toolCallId"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "toolName"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "code": "invalid_type",
                    "expected": "object",
                    "path": [
                      "output"
                    ],
                    "message": "Invalid input: expected object, received undefined"
                  }
                ],
                [
                  {
                    "code": "invalid_value",
                    "values": [
                      "tool-approval-response"
                    ],
                    "path": [
                      "type"
                    ],
                    "message": "Invalid input: expected \"tool-approval-response\""
                  },
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [
                      "approvalId"
                    ],
                    "message": "Invalid input: expected string, received undefined"
                  },
                  {
                    "expected": "boolean",
                    "code": "invalid_type",
                    "path": [
                      "approved"
                    ],
                    "message": "Invalid input: expected boolean, received undefined"
                  }
                ]
              ],
              "path": [
                "content",
                1
              ],
              "message": "Invalid input"
            }
          ]
        ],
        "path": [
          0
        ],
        "message": "Invalid input"
      }
    ]
        at new ZodError (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/zod@4.1.12/node_modules/[4mzod[24m/v4/core/core.js:30:39)
        at Module.<anonymous> (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/zod@4.1.12/node_modules/[4mzod[24m/v4/core/parse.js:53:20)
        at Object.validate (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@4.0.0-beta.31_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:1826:33)
        at safeValidateTypes (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@4.0.0-beta.31_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:1863:39)
        at standardizePrompt (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1589:34)
        at fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5626:37)
        at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:30
        at Object.startActiveSpan (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1685:14)
        at recordSpan (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1756:17)
    [90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m,
    value: [ [36m[Object][39m ],
    [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
    [[32mSymbol(vercel.ai.error.AI_TypeValidationError)[39m]: [33mtrue[39m
  },
  prompt: {
    system: [32m'You are a friendly Phaser 3 game coding teacher helping kids create their first games! ðŸŽ®\n'[39m +
      [32m'\n'[39m +
      [32m'YOUR TEACHING STYLE:\n'[39m +
      [32m'- Be SUPER encouraging and positive! Every question is a great question!\n'[39m +
      [32m"- Explain things simply, like you're talking to a curious 10-year-old\n"[39m +
      [32m'- Use fun analogies (e.g., "scenes are like different levels in Mario")\n'[39m +
      [32m'- Break down complex ideas into bite-sized pieces\n'[39m +
      [32m'- Celebrate their progress and creativity!\n'[39m +
      [32m'\n'[39m +
      [32m'HOW TO HELP:\n'[39m +
      [32m"1. ALWAYS read files first before making changes (so you know what's there!)\n"[39m +
      [32m'2. Explain what the current code does in simple terms\n'[39m +
      [32m'3. Suggest ONE small improvement at a time (baby steps = better learning!)\n'[39m +
      [32m`4. Use fun examples: "Let's make the player jump higher like Mario!"\n`[39m +
      [32m'5. Teach WHY something works, not just HOW\n'[39m +
      [32m'\n'[39m +
      [32m'Ensure you make small incremental steps at a time.\n'[39m +
      [32m'Ensure the child can see progress immediately to accelerate feedback loop.\n'[39m +
      [32m'Ask clarifying questions for large/complex/ambigous tasks after breaking it down.\n'[39m +
      [32m'\n'[39m +
      [32m"Remember: You're not just writing code - you're teaching kids how to bring their game ideas to life! Make it FUN! ðŸš€\n"[39m +
      [32m'\n'[39m +
      [32m'---\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'DEBUGGING PROTOCOL (Follow strictly for ALL bug fixes):\n'[39m +
      [32m'\n'[39m +
      [32m'1. READ FIRST - ALWAYS use readFile() before fixing bugs\n'[39m +
      [32m'   â€¢ Never guess at code structure\n'[39m +
      [32m'   â€¢ Read the FULL file to understand context\n'[39m +
      [32m'   â€¢ Check related files if needed\n'[39m +
      [32m'\n'[39m +
      [32m'2. CHECK CONSOLE - Use getConsoleLogs() to see runtime errors and gameAPI.log() output\n'[39m +
      [32m'   â€¢ Look for "X is not a function" errors\n'[39m +
      [32m'   â€¢ Check if expected logs are missing (callback not firing)\n'[39m +
      [32m'   â€¢ Use logs to verify code execution flow\n'[39m +
      [32m'\n'[39m +
      [32m'3. COMMON PHASER 3 BUGS - Check these patterns first:\n'[39m +
      [32m'\n'[39m +
      [32m'   ðŸ”´ CALLBACK DEFINED AFTER REGISTRATION:\n'[39m +
      [32m'   Problem: Phaser captures callback by reference at registration time\n'[39m +
      [32m'   âŒ WRONG:\n'[39m +
      [32m'      scene.physics.add.overlap(a, b, this.collectCoin);  // this.collectCoin is undefined!\n'[39m +
      [32m'      this.collectCoin = () => { /* ... */ };             // Defined too late\n'[39m +
      [32m'\n'[39m +
      [32m'   âœ… CORRECT:\n'[39m +
      [32m'      this.collectCoin = () => { /* ... */ };             // Define FIRST\n'[39m +
      [32m'      scene.physics.add.overlap(a, b, this.collectCoin);  // Then register\n'[39m +
      [32m'\n'[39m +
      [32m'   ðŸ”´ PHYSICS BODY POSITION MISMATCH:\n'[39m +
      [32m'   Problem: Physics bodies use CENTER positioning, Graphics use TOP-LEFT\n'[39m +
      [32m'   âŒ WRONG:\n'[39m +
      [32m'      this.platforms.create(400, 580, null).setSize(800, 40);  // Center at Y=580\n'[39m +
      [32m'      graphics.fillRect(0, 560, 800, 40);  // Top-left at Y=560\n'[39m +
      [32m'      // Result: 20px gap causes collision bugs!\n'[39m +
      [32m'\n'[39m +
      [32m'   âœ… CORRECT:\n'[39m +
      [32m'      this.platforms.create(400, 560, null).setOrigin(0.5, 0).setSize(800, 40);  // Top at Y=560\n'[39m +
      [32m'      graphics.fillRect(0, 560, 800, 40);  // Aligned!\n'[39m +
      [32m'\n'[39m +
      [32m'4. ROOT CAUSE ANALYSIS - Use error taxonomy:\n'[39m +
      [32m'   â€¢ "X is not a function" â†’ 90% callback defined after registration OR scope issue\n'[39m +
      [32m'   â€¢ "Cannot read property Y of undefined" â†’ initialization order problem\n'[39m +
      [32m'   â€¢ "X is not defined" â†’ typo or missing variable\n'[39m +
      [32m'   â€¢ Silent failures (no error) â†’ callback not registered or wrong event name\n'[39m +
      [32m'   â€¢ Ask "WHY?" 3 times to find the real cause, not just symptoms\n'[39m +
      [32m'\n'[39m +
      [32m'5. EXPLAIN BEFORE FIXING - Use this format:\n'[39m +
      [32m'   [1 sentence] "Found it! The callback is defined after registration."\n'[39m +
      [32m'   [2 sentences] "Phaser captures the reference when you call overlap(), but at that moment..."\n'[39m +
      [32m'   [Code block] Show the fix\n'[39m +
      [32m'   [1 sentence] "This works because now the callback exists before registration!"\n'[39m +
      [32m'\n'[39m +
      [32m'6. ONE CHANGE AT A TIME\n'[39m +
      [32m'   â€¢ Fix ONE bug â†’ let user test â†’ next bug\n'[39m +
      [32m'   â€¢ Add ONE feature â†’ verify it works â†’ next feature\n'[39m +
      [32m'   â€¢ Never rewrite entire files unless explicitly requested\n'[39m +
      [32m'\n'[39m +
      [32m"RED FLAGS - Stop and reconsider if you're about to:\n"[39m +
      [32m'âŒ Fix code without reading the file first\n'[39m +
      [32m'âŒ Fix code without checking console logs\n'[39m +
      [32m'âŒ Make multiple unrelated changes at once\n'[39m +
      [32m'âŒ Propose changes without explaining WHY they work\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'---\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'PLATFORM ARCHITECTURE RULES:\n'[39m +
      [32m'\n'[39m +
      [32m'âš ï¸ CRITICAL: Understanding `this` in Scene Methods\n'[39m +
      [32m'\n'[39m +
      [32m'In our platform, `this` inside scene lifecycle methods (create, update) refers to a\n'[39m +
      [32m'PERSISTENT STATE OBJECT, not the scene definition object.\n'[39m +
      [32m'\n'[39m +
      [32m'âŒ COMMON MISTAKE (causes "X is not a function" errors):\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'window.scenes = {\n'[39m +
      [32m'  Game: {\n'[39m +
      [32m'    create(scene) {\n'[39m +
      [32m'      this.helper(scene);  // âŒ ERROR: helper is not a function!\n'[39m +
      [32m'    },\n'[39m +
      [32m'    helper(scene) {  // âŒ This is NOT on `this`!\n'[39m +
      [32m"      scene.add.text(100, 100, 'Hello');\n"[39m +
      [32m'    }\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… SOLUTION 1 - Local function (for one-time use in create):\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'create(scene) {\n'[39m +
      [32m'  const helper = (scene) => { /* code */ };  // âœ… Local function\n'[39m +
      [32m'  helper(scene);  // âœ… Works!\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… SOLUTION 2 - Store on `this` (for use in create AND update):\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'create(scene) {\n'[39m +
      [32m'  this.helper = (scene) => { /* code */ };  // âœ… On state object\n'[39m +
      [32m'  this.helper(scene);  // âœ… Works!\n'[39m +
      [32m'},\n'[39m +
      [32m'update(scene) {\n'[39m +
      [32m'  this.helper(scene);  // âœ… Also works here!\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'QUICK DECISION TREE:\n'[39m +
      [32m'â€¢ One-time setup helper â†’ `const helper = () => {}`\n'[39m +
      [32m'â€¢ Shared between create/update â†’ `this.helper = () => {}`\n'[39m +
      [32m'â€¢ Reusable across scenes â†’ Suggest separate /src/utils/ file\n'[39m +
      [32m'\n'[39m +
      [32m'CODE ORGANIZATION:\n'[39m +
      [32m"â€¢ File < 300 lines â†’ Keep in one file (don't over-engineer!)\n"[39m +
      [32m'â€¢ File 300-500 lines â†’ Suggest splitting by scene\n'[39m +
      [32m'â€¢ File > 500 lines â†’ Suggest entity + utility splitting\n'[39m +
      [32m'â€¢ Repeated code 3+ times â†’ Extract to helper function\n'[39m +
      [32m'\n'[39m +
      [32m'MULTIPLAYER - ALWAYS ENABLED (CRITICAL):\n'[39m +
      [32m'Our platform has ALWAYS-ON MULTIPLAYER. Every game starts in multiplayer mode (either real P2P or solo mock).\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… GUARANTEED TRUTHS:\n'[39m +
      [32m'- getMyId() ALWAYS returns a string (never null)\n'[39m +
      [32m'- isHost() ALWAYS returns boolean (true by default)\n'[39m +
      [32m'- Multiplayer is active from the moment the game loads\n'[39m +
      [32m'- No need to check "is multiplayer enabled" - it always is\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… CORRECT USAGE - getMyId() always returns a string:\n'[39m +
      [32m'  const myId = gameAPI.multiplayer.getMyId(); // Always a string\n'[39m +
      [32m'  const role = roles[parseInt(myId) % 4];     // Works perfectly\n'[39m +
      [32m'\n'[39m +
      [32m'âŒ NEVER DO THIS - no null checks needed:\n'[39m +
      [32m'  if (playerId === null) { ... }              // playerId is never null\n'[39m +
      [32m"  const myId = getMyId() || 'default';        // No need for fallback\n"[39m +
      [32m'  if (!multiplayer._enabled) { ... }          // Always enabled\n'[39m +
      [32m'\n'[39m +
      [32m'MULTIPLAYER RED FLAGS:\n'[39m +
      [32m'âŒ Spawning without gameAPI.multiplayer.isHost() check\n'[39m +
      [32m"âŒ Not broadcasting spawn events (non-host players won't see objects!)\n"[39m +
      [32m'âŒ Event listeners in update() (should be in create)\n'[39m +
      [32m'âŒ this.method() where method is a peer (see above)\n'[39m +
      [32m"âŒ Any null checks on getMyId() - it's always a string!\n"[39m +
      [32m'âŒ Auto-assigning roles without asking if players should choose\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… Ask about player choice before auto-assigning:\n'[39m +
      [32m'When you see multiplayer roles/characters being assigned, ask:\n'[39m +
      [32m'"Should players pick their character in a selection screen, or auto-assign based on join order?"\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'---\n'[39m +
      [32m'\n'[39m +
      [32m'\n'[39m +
      [32m'GAME DESIGN PATTERNS (Ask clarifying questions when these apply):\n'[39m +
      [32m'\n'[39m +
      [32m'ðŸŽ® CHARACTER SELECTION\n'[39m +
      [32m'When user mentions: "multiplayer", "choose character", "different roles", "4 players"\n'[39m +
      [32m'ASK: "Should players pick their character, or auto-assign them?"\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… GOOD PATTERN - Character Selection Scene:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'CharacterSelect: {\n'[39m +
      [32m'  create(scene) {\n'[39m +
      [32m'    // Store selected character in state\n'[39m +
      [32m'    this.selectedCharacter = null;\n'[39m +
      [32m'\n'[39m +
      [32m'    // Show character options (fire, water, air, earth)\n'[39m +
      [32m"    const characters = ['fireboy', 'watergirl', 'airboy', 'earthgirl'];\n"[39m +
      [32m'    characters.forEach((char, i) => {\n'[39m +
      [32m'      const btn = scene.add.text(100 + i * 150, 300, char);\n'[39m +
      [32m'      btn.setInteractive();\n'[39m +
      [32m"      btn.on('pointerdown', () => {\n"[39m +
      [32m'        this.selectedCharacter = char;\n'[39m +
      [32m"        gameAPI.switchScene('Game', { character: char });\n"[39m +
      [32m'      });\n'[39m +
      [32m'    });\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'âŒ BAD PATTERN - Auto-assign based on player ID math:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m"// âŒ Don't do this - no player choice!\n"[39m +
      [32m'const playerId = gameAPI.multiplayer.getMyId();\n'[39m +
      [32m'const role = roles[parseInt(playerId) % 4]; // Player has no control\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'ðŸŽ® MULTIPLAYER LOBBIES\n'[39m +
      [32m'When user mentions: "multiplayer", "wait for players", "ready up"\n'[39m +
      [32m'ASK: "Do you want a lobby where players can ready up before the game starts?"\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… GOOD PATTERN - Lobby with Ready System:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'Lobby: {\n'[39m +
      [32m'  create(scene) {\n'[39m +
      [32m'    this.playersReady = {};\n'[39m +
      [32m'\n'[39m +
      [32m'    // Ready button\n'[39m +
      [32m"    const readyBtn = scene.add.text(400, 400, 'READY').setInteractive();\n"[39m +
      [32m"    readyBtn.on('pointerdown', () => {\n"[39m +
      [32m'      const myId = gameAPI.multiplayer.getMyId();\n'[39m +
      [32m"      gameAPI.multiplayer.broadcast('player-ready', { playerId: myId });\n"[39m +
      [32m'    });\n'[39m +
      [32m'\n'[39m +
      [32m'    // Listen for ready events\n'[39m +
      [32m"    gameAPI.multiplayer.on('player-ready', (data) => {\n"[39m +
      [32m'      this.playersReady[data.playerId] = true;\n'[39m +
      [32m'      // If all ready, start game\n'[39m +
      [32m'      if (Object.keys(this.playersReady).length >= 2) {\n'[39m +
      [32m"        gameAPI.switchScene('Game');\n"[39m +
      [32m'      }\n'[39m +
      [32m'    });\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'ðŸŽ® LEVEL PROGRESSION\n'[39m +
      [32m'When user mentions: "multiple levels", "next level", "level 2"\n'[39m +
      [32m'ASK: "How should players advance to the next level? Automatically or with a button?"\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… GOOD PATTERN - Pass level data between scenes:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'// Game scene receives level number\n'[39m +
      [32m'Game: {\n'[39m +
      [32m'  create(scene, data) {\n'[39m +
      [32m'    this.level = data.level || 1; // Default to level 1\n'[39m +
      [32m'    // ... create level based on this.level\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'\n'[39m +
      [32m'// Victory scene advances to next level\n'[39m +
      [32m'Victory: {\n'[39m +
      [32m'  create(scene, data) {\n'[39m +
      [32m"    const nextBtn = scene.add.text(400, 400, 'Next Level').setInteractive();\n"[39m +
      [32m"    nextBtn.on('pointerdown', () => {\n"[39m +
      [32m"      gameAPI.switchScene('Game', { level: data.level + 1 });\n"[39m +
      [32m'    });\n'[39m +
      [32m'  }\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'ðŸŽ® HOST-ONLY SPAWNING (CRITICAL MULTIPLAYER PATTERN)\n'[39m +
      [32m'\n'[39m +
      [32m'**THE GOLDEN RULE: Only the host spawns game objects. Host broadcasts spawn events to all players.**\n'[39m +
      [32m'\n'[39m +
      [32m'âœ… CORRECT PATTERN - Host spawns and broadcasts:\n'[39m +
      [32m'```javascript\n'[39m +
      [32m'create(scene) {\n'[39m +
      [32m'  // Host spawns all game objects\n'[39m +
      [32m'  if (gameAPI.multiplayer.isHost()) {\n'[39m +
      [32m'    for (let i = 0; i < 5; i++) {\n'[39m +
      [32m'      const x = Math.random() * 800;\n'[39m +
      [32m"      const enemy = scene.add.sprite(x, 100, 'enemy');\n"[39m +
      [32m'      this.enemies.push(enemy);\n'[39m +
      [32m'\n'[39m +
      [32m'      // Broadcast to all players\n'[39m +
      [32m"      gameAPI.multiplayer.broadcast('spawn-enemy', { id: i, x, y: 100 });\n"[39m +
      [32m'    }\n'[39m +
      [32m'  }\n'[39m +
      [32m'\n'[39m +
      [32m'  // All players (including host) listen for spawn events\n'[39m +
      [32m"  gameAPI.multiplayer.on('spawn-enemy', (peerId, data) => {\n"[39m +
      [32m'    if (!gameAPI.multiplayer.isHost()) {\n'[39m +
      [32m"      const enemy = scene.add.sprite(data.x, data.y, 'enemy');\n"[39m +
      [32m'      enemy.enemyId = data.id;\n'[39m +
      [32m'      this.enemies.push(enemy);\n'[39m +
      [32m'    }\n'[39m +
      [32m'  });\n'[39m +
      [32m'}\n'[39m +
      [32m'```\n'[39m +
      [32m'\n'[39m +
      [32m'âŒ WRONG PATTERN - Everyone '[39m... 18638 more characters,
    prompt: [90mundefined[39m,
    messages: [ [36m[Object][39m ]
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_InvalidPromptError)[39m]: [33mtrue[39m
}















[1;1H[0J[2m5:03:49 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m5:03:49 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m5:03:55 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatMessage.svelte, /src/app.css[22m















[1;1H[0J[2m5:03:55 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatMessage.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model
APICallError [AI_APICallError]: messages.2: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01RkEpf3VcWaTSm294kEnpHf. Each `tool_use` block must have a corresponding `tool_result` block in the next message.
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3957d1ef67136-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'320'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:44:54 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUyksMLBdPM9nf3YQYyz4'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'18'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.2: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01RkEpf3VcWaTSm294kEnpHf. Each `tool_use` block must have a corresponding `tool_result` block in the next message."},"request_id":"req_011CUyksMLBdPM9nf3YQYyz4"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.2: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01RkEpf3VcWaTSm294kEnpHf. Each `tool_use` block must have a corresponding `tool_result` block in the next message.'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}















[1;1H[0J[2m5:51:13 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m5:51:13 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/api/chat/+server.ts[22m















[1;1H[0J[2m5:51:28 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m5:51:28 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/api/chat/+server.ts[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
APICallError [AI_APICallError]: messages.1.content.1.tool_use.input: Field required
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3a03a2d8e0fc3-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'165'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:52:14 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUymRmtCSoFfBXGTP9mjV'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'23'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.1.content.1.tool_use.input: Field required"},"request_id":"req_011CUymRmtCSoFfBXGTP9mjV"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.1.content.1.tool_use.input: Field required'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)
APICallError [AI_APICallError]: messages.1.content.1.tool_use.input: Field required
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3a03c7bc30fc3-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'165'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:52:14 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUymRoTStBXXnrscQ8ww3'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'27'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.1.content.1.tool_use.input: Field required"},"request_id":"req_011CUymRoTStBXXnrscQ8ww3"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.1.content.1.tool_use.input: Field required'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 5 total, sending last 5 to model (3 user turns)
APICallError [AI_APICallError]: messages.1.content.1.tool_use.input: Field required
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3a0817bd5cd04-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'165'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:52:25 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUymSch5bm5vWFVx2yk6c'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'38'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.1.content.1.tool_use.input: Field required"},"request_id":"req_011CUymSch5bm5vWFVx2yk6c"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.1.content.1.tool_use.input: Field required'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (4 user turns)
APICallError [AI_APICallError]: messages.1.content.1.tool_use.input: Field required
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3a0ab7b436a72-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'165'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:52:32 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUymT7Pz4oatTZiCUQZJM'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'24'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.1.content.1.tool_use.input: Field required"},"request_id":"req_011CUymT7Pz4oatTZiCUQZJM"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.1.content.1.tool_use.input: Field required'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}















[1;1H[0J[2m5:54:16 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m5:54:16 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m5:54:40 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m5:54:40 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)
APICallError [AI_APICallError]: messages.2: all messages must have non-empty content except for the optional final assistant message
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3a4a97eb2a94f-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'214'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:55:15 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUymfAZKciHhCddXGXFCx'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'186'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.2: all messages must have non-empty content except for the optional final assistant message"},"request_id":"req_011CUymfAZKciHhCddXGXFCx"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.2: all messages must have non-empty content except for the optional final assistant message'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
APICallError [AI_APICallError]: messages.2: all messages must have non-empty content except for the optional final assistant message
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3a4ac48b0e7cc-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'214'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:55:16 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUymfCYd69QaRy8VACbTU'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'88'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.2: all messages must have non-empty content except for the optional final assistant message"},"request_id":"req_011CUymfCYd69QaRy8VACbTU"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.2: all messages must have non-empty content except for the optional final assistant message'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}















[1;1H[0J[2m5:56:53 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m5:56:53 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m5:57:12 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m5:57:12 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
APICallError [AI_APICallError]: messages.2: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01N6nS5ZtMSk5QKReTpLjXRa. Each `tool_use` block must have a corresponding `tool_result` block in the next message.
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3a897ce3da826-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'320'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:57:56 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUyms2wkt6ksNaxbAYT1N'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'19'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.2: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01N6nS5ZtMSk5QKReTpLjXRa. Each `tool_use` block must have a corresponding `tool_result` block in the next message."},"request_id":"req_011CUyms2wkt6ksNaxbAYT1N"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.2: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01N6nS5ZtMSk5QKReTpLjXRa. Each `tool_use` block must have a corresponding `tool_result` block in the next message.'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
APICallError [AI_APICallError]: messages.1.content.1.tool_use.input: Field required
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3a91fbc7aaad1-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'165'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:58:18 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUymtdwDQib5hT8NnsGxo'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'31'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.1.content.1.tool_use.input: Field required"},"request_id":"req_011CUymtdwDQib5hT8NnsGxo"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.1.content.1.tool_use.input: Field required'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)
APICallError [AI_APICallError]: messages.1.content.1.tool_use.input: Field required
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3a9227eafaad1-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'165'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 06:58:18 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUymtfkbnRvvndAhkfKtD'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'18'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.1.content.1.tool_use.input: Field required"},"request_id":"req_011CUymtfkbnRvvndAhkfKtD"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.1.content.1.tool_use.input: Field required'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 5 total, sending last 5 to model (3 user turns)
APICallError [AI_APICallError]: messages.4: all messages must have non-empty content except for the optional final assistant message
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3abcb7d6a1874-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'214'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 07:00:07 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUyn2hfArikHxcvHeFnr3'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'31'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.4: all messages must have non-empty content except for the optional final assistant message"},"request_id":"req_011CUyn2hfArikHxcvHeFnr3"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.4: all messages must have non-empty content except for the optional final assistant message'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (4 user turns)
APICallError [AI_APICallError]: messages.4: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01H2VUhddah9biobiPXVrThK. Each `tool_use` block must have a corresponding `tool_result` block in the next message.
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3adf36f1297c5-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'320'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 07:01:36 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUyn9DCbXduJYaYPCH19G'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'29'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.4: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01H2VUhddah9biobiPXVrThK. Each `tool_use` block must have a corresponding `tool_result` block in the next message."},"request_id":"req_011CUyn9DCbXduJYaYPCH19G"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.4: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01H2VUhddah9biobiPXVrThK. Each `tool_use` block must have a corresponding `tool_result` block in the next message.'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}















[1;1H[0J[2m6:01:43 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m















[1;1H[0J[2m6:01:43 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m [33m(x2)[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)















[1;1H[0J[2m6:02:12 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:02:12 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
ðŸ“Š Message count: 61 total, sending last 61 to model (2 user turns)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 35 total, sending last 35 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 35 total, sending last 35 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 35 total, sending last 35 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 35 total, sending last 35 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 35 total, sending last 35 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 35 total, sending last 35 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 35 total, sending last 35 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 35 total, sending last 35 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 36 total, sending last 36 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 37 total, sending last 37 to model (4 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 38 total, sending last 38 to model (4 user turns)
ðŸ“Š Message count: 39 total, sending last 39 to model (5 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 40 total, sending last 40 to model (5 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 42 total, sending last 40 to model (5 user turns)
APICallError [AI_APICallError]: messages.0: all messages must have non-empty content except for the optional final assistant message
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m
    ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c3bdab7bb3aad7-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'214'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 07:12:20 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUynxgBdVPoqFDQP81TGL'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'11'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.0: all messages must have non-empty content except for the optional final assistant message"},"request_id":"req_011CUynxgBdVPoqFDQP81TGL"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.0: all messages must have non-empty content except for the optional final assistant message'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}















[1;1H[0J[2m6:14:57 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:14:57 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m6:15:07 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:15:07 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)















[1;1H[0J[2m6:26:24 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:26:24 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m6:28:00 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m















[1;1H[0J[2m6:28:00 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m [33m(x2)[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)















[1;1H[0J[2m6:28:23 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m [33m(x3)[39m















[1;1H[0J[2m6:28:23 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m [33m(x4)[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)















[1;1H[0J[2m6:28:59 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m6:28:59 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/lib/ai/api-docs-prompt.ts[22m















[1;1H[0J[2m6:29:17 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m6:29:17 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/lib/ai/api-docs-prompt.ts[22m















[1;1H[0J[2m6:29:31 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m6:29:31 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/lib/ai/system-prompt.ts[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)















[1;1H[0J[2m6:46:31 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte, /src/app.css[22m















[1;1H[0J[2m6:46:31 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m















[1;1H[0J[2m6:46:41 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte, /src/app.css[22m















[1;1H[0J[2m6:46:41 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m















[1;1H[0J[2m6:47:00 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:47:00 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m6:47:11 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:47:11 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m6:47:38 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:47:38 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m6:48:07 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:48:07 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m6:48:15 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:48:15 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m6:48:21 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:48:21 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m6:48:38 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m















[1;1H[0J[2m6:48:56 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m [33m(x2)[39m















[1;1H[0J[2m6:49:15 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m [33m(x3)[39m
[36m6:49:34 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:34 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:34 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m6:49:34 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m6:49:34 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m6:49:34 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:34 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:34 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:47 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:47 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:47 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m6:49:47 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m6:49:47 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m6:49:47 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:47 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:47 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m6:49:55 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m6:49:55 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m6:49:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:49:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m6:50:03 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatMessageList.svelte, /src/app.css[22m















[1;1H[0J[2m6:50:03 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatMessageList.svelte[22m















[1;1H[0J[2m6:50:08 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatMessageList.svelte, /src/app.css[22m















[1;1H[0J[2m6:50:08 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatMessageList.svelte[22m















[1;1H[0J[2m6:50:16 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatMessage.svelte, /src/app.css[22m















[1;1H[0J[2m6:50:16 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatMessage.svelte[22m















[1;1H[0J[2m6:50:21 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatMessage.svelte, /src/app.css[22m















[1;1H[0J[2m6:50:21 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatMessage.svelte[22m















[1;1H[0J[2m6:50:30 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/MessagePartTool.svelte, /src/app.css[22m















[1;1H[0J[2m6:50:30 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/MessagePartTool.svelte[22m















[1;1H[0J[2m6:50:35 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/MessagePartTool.svelte, /src/app.css[22m















[1;1H[0J[2m6:50:35 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/MessagePartTool.svelte[22m















[1;1H[0J[2m6:50:45 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte, /src/app.css[22m















[1;1H[0J[2m6:50:45 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte[22m
[36m6:50:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte:161:1 Unused CSS selector ".approval-request"
https://svelte.dev/e/css_unused_selector[39m
[36m6:50:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte:169:1 Unused CSS selector ".approval-details"
https://svelte.dev/e/css_unused_selector[39m
[36m6:50:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte:180:1 Unused CSS selector ".edits-count"
https://svelte.dev/e/css_unused_selector[39m
[36m6:50:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte:186:1 Unused CSS selector ".diff-notice"
https://svelte.dev/e/css_unused_selector[39m















[1;1H[0J[2m6:50:55 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte, /src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte?svelte&type=style&lang.css, /src/app.css[22m















[1;1H[0J[2m6:50:55 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte[22m
[36m6:50:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte:161:1 Unused CSS selector ".approval-request"
https://svelte.dev/e/css_unused_selector[39m
[36m6:50:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte:169:1 Unused CSS selector ".approval-details"
https://svelte.dev/e/css_unused_selector[39m
[36m6:50:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte:180:1 Unused CSS selector ".edits-count"
https://svelte.dev/e/css_unused_selector[39m
[36m6:50:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte:186:1 Unused CSS selector ".diff-notice"
https://svelte.dev/e/css_unused_selector[39m















[1;1H[0J[2m6:51:04 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte?svelte&type=style&lang.css, /src/app.css[22m















[1;1H[0J[2m6:51:04 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/tools/ToolEditFile.svelte[22m















[1;1H[0J[2m6:51:20 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/ChatInputArea.svelte, /src/app.css[22m















[1;1H[0J[2m6:51:20 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/ChatInputArea.svelte[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
[36m6:51:45 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:51:45 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:51:45 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)















[1;1H[0J[2m6:52:54 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:52:54 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)















[1;1H[0J[2m6:54:20 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:54:20 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m6:54:47 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:54:47 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)















[1;1H[0J[2m6:56:03 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:56:03 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: [90mundefined[39m
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)















[1;1H[0J[2m6:57:53 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m6:57:53 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
APICallError [AI_APICallError]: messages.4: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01CZQjuhBi7d5yRFYAHX9f8E. Each `tool_use` block must have a corresponding `tool_result` block in the next message.
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c40123aa3bdb45-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'320'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 07:58:23 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUyrUPL3aJPEHX32pSBK8'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'17'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.4: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01CZQjuhBi7d5yRFYAHX9f8E. Each `tool_use` block must have a corresponding `tool_result` block in the next message."},"request_id":"req_011CUyrUPL3aJPEHX32pSBK8"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.4: `tool_use` ids were found without `tool_result` blocks immediately after: toolu_01CZQjuhBi7d5yRFYAHX9f8E. Each `tool_use` block must have a corresponding `tool_result` block in the next message.'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: [90mundefined[39m
Extracted planMode from messages: [33mfalse[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)















[1;1H[0J[2m8:44:14 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m8:44:14 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m8:44:24 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m8:44:24 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m8:44:42 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m8:44:42 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m8:45:19 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m8:45:19 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 5 total, sending last 5 to model (3 user turns)
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 48 total, sending last 48 to model (3 user turns)
APICallError [AI_APICallError]: prompt is too long: 205769 tokens > 200000 maximum
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m,
      ... 46 more items
    ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c4a806c94de7c2-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'164'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 09:52:19 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUz1AHJhBxesyxRuDFpH3'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'375'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"prompt is too long: 205769 tokens > 200000 maximum"},"request_id":"req_011CUz1AHJhBxesyxRuDFpH3"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'prompt is too long: 205769 tokens > 200000 maximum'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mfalse[39m
ðŸ“Š Message count: 22 total, sending last 22 to model (2 user turns)















[1;1H[0J[2m9:23:21 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m9:23:21 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m9:23:43 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m9:23:43 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m















[1;1H[0J[2m9:23:57 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m9:23:57 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
APICallError [AI_APICallError]: messages.6: all messages must have non-empty content except for the optional final assistant message
    at file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:885:14
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async postToApi (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+provider-utils@3.0.16_zod@4.1.12/node_modules/[4m@ai-sdk[24m/provider-utils/dist/index.mjs:730:28)
    at async Proxy.doStream (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@ai-sdk+anthropic@2.0.43_zod@4.1.12/node_modules/[4m@ai-sdk[24m/anthropic/dist/index.mjs:2267:50)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5780:25)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24
    at async _retryWithExponentialBackoff (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1921:12)
    at async streamStep (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:5737:15)
    at async fn (file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:6079:9)
    at async file:///Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/ai@6.0.0-beta.94_zod@4.1.12/node_modules/[4mai[24m/dist/index.mjs:1761:24 {
  cause: [90mundefined[39m,
  url: [32m'https://api.anthropic.com/v1/messages'[39m,
  requestBodyValues: {
    model: [32m'claude-haiku-4-5'[39m,
    max_tokens: [33m64000[39m,
    temperature: [33m0.7[39m,
    top_k: [90mundefined[39m,
    top_p: [90mundefined[39m,
    stop_sequences: [90mundefined[39m,
    system: [ [36m[Object][39m ],
    messages: [
      [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m, [36m[Object][39m,
      [36m[Object][39m
    ],
    tools: [ [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m, [36m[Object][39m ],
    tool_choice: { type: [32m'auto'[39m, disable_parallel_tool_use: [90mundefined[39m },
    stream: [33mtrue[39m
  },
  statusCode: [33m400[39m,
  responseHeaders: {
    [32m'anthropic-organization-id'[39m: [32m'6e81fe5b-22ac-4e14-a440-a05422ca6a41'[39m,
    [32m'cf-cache-status'[39m: [32m'DYNAMIC'[39m,
    [32m'cf-ray'[39m: [32m'99c526331a6d6cb5-SYD'[39m,
    connection: [32m'keep-alive'[39m,
    [32m'content-length'[39m: [32m'214'[39m,
    [32m'content-type'[39m: [32m'application/json'[39m,
    date: [32m'Mon, 10 Nov 2025 11:18:27 GMT'[39m,
    [32m'request-id'[39m: [32m'req_011CUz7jEVPkAPT7v7763Vq9'[39m,
    server: [32m'cloudflare'[39m,
    [32m'strict-transport-security'[39m: [32m'max-age=31536000; includeSubDomains; preload'[39m,
    [32m'x-envoy-upstream-service-time'[39m: [32m'18'[39m,
    [32m'x-robots-tag'[39m: [32m'none'[39m,
    [32m'x-should-retry'[39m: [32m'false'[39m
  },
  responseBody: [32m'{"type":"error","error":{"type":"invalid_request_error","message":"messages.6: all messages must have non-empty content except for the optional final assistant message"},"request_id":"req_011CUz7jEVPkAPT7v7763Vq9"}'[39m,
  isRetryable: [33mfalse[39m,
  data: {
    type: [32m'error'[39m,
    error: {
      type: [32m'invalid_request_error'[39m,
      message: [32m'messages.6: all messages must have non-empty content except for the optional final assistant message'[39m
    }
  },
  [[32mSymbol(vercel.ai.error)[39m]: [33mtrue[39m,
  [[32mSymbol(vercel.ai.error.AI_APICallError)[39m]: [33mtrue[39m
}















[1;1H[0J[2m10:20:54 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m10:20:54 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
[36m10:27:03 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:27:03 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:27:03 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:27:03 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:27:03 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m















[1;1H[0J[2m10:27:18 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m10:27:18 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/lib/ai/tools.ts[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
[36m10:30:02 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:30:02 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:30:02 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mSyntax error "n"[0m

    virtual:src/scenes/Game.js:13:49:
[37m      13 â”‚     gameAPI.log(`Starting level ${data.level}`);\[32m[37mn
         â•µ                                                  [32m^[0m

Bundling error: Error: Build failed with 1 error:
virtual:src/scenes/Game.js:13:49: ERROR: Syntax error "n"
    at failureErrorWithLog (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:1467:15)
    at /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:926:25
    at runOnEndCallbacks (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:1307:45)
    at buildResponseToResult (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:924:7)
    at /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:951:16
    at responseCallbacks.<computed> (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:603:9)
    at handleIncomingPacket (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:658:12)
    at Socket.readFromStdout (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:581:7)
[90m    at Socket.emit (node:events:524:28)[39m
[90m    at addChunk (node:internal/streams/readable:561:12)[39m {
  errors: [36m[Getter/Setter][39m,
  warnings: [36m[Getter/Setter][39m
}
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 5 total, sending last 5 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 6 total, sending last 6 to model (3 user turns)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
[36m10:38:59 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:20:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:38:59 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:38:59 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:53 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:53 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:53 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:42:53 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:42:53 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:42:53 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:53 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:53 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:59 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:59 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:59 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:42:59 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:42:59 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:42:59 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:59 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:42:59 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:06 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:06 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:06 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:43:06 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:43:06 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:43:06 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:06 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:06 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:12 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:12 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:12 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:43:12 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:43:12 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:43:12 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:12 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:12 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:29 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:29 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:29 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:43:29 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:43:29 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:43:29 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:29 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:29 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:40 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:40 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:40 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:43:40 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:43:40 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:43:40 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:40 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:40 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:43:55 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:43:55 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:43:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:43:55 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:01 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:01 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:01 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:44:01 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:44:01 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:44:01 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:01 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:01 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:14 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:14 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:14 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:44:14 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:44:14 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:44:14 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:14 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:14 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:26 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:26 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:26 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:44:26 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:44:26 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:44:26 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:26 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:26 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:33 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:33 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:33 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:44:33 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:44:33 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:44:33 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:33 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:33 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/0.js[22m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/1.js[22m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/5.js[22m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/6.js[22m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/nodes/8.js[22m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/app.js[22m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/client/matchers.js[22m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/server/internal.js[22m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/root.js[22m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/root.js[22m [33m(x2)[39m















[1;1H[0J[2m10:44:44 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2m.svelte-kit/generated/root.svelte[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)
[36m10:44:46 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:46 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:44:46 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
[36m10:45:35 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:45:35 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:45:35 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m10:45:35 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m10:45:35 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
[36m10:45:35 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:45:35 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:45:35 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
[36m10:45:43 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:45:43 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m10:45:43 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mSyntax error "n"[0m

    virtual:src/scenes/Game.js:1:267:
[37m      1 â”‚ ...ection with multiplayer sync\n * - Wall jumping and coyote time\n */\[32m[37mn\nexport const Game = {\n  create(scene, data) {\n    gameAPI.log(`S...
        â•µ                                                                         [32m^[0m

Bundling error: Error: Build failed with 1 error:
virtual:src/scenes/Game.js:1:267: ERROR: Syntax error "n"
    at failureErrorWithLog (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:1467:15)
    at /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:926:25
    at runOnEndCallbacks (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:1307:45)
    at buildResponseToResult (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:924:7)
    at /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:951:16
    at responseCallbacks.<computed> (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:603:9)
    at handleIncomingPacket (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:658:12)
    at Socket.readFromStdout (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:581:7)
[90m    at Socket.emit (node:events:524:28)[39m
[90m    at addChunk (node:internal/streams/readable:561:12)[39m {
  errors: [36m[Getter/Setter][39m,
  warnings: [36m[Getter/Setter][39m
}
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)















[1;1H[0J[2m11:07:59 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m11:07:59 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m















[1;1H[0J[2m11:08:16 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/AIChatPanel.svelte, /src/app.css[22m















[1;1H[0J[2m11:08:16 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/AIChatPanel.svelte[22m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /api/projects/f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0/conversations[0m
Error: Failed query: select "id", "project_id", "title", "is_archived", "created_at", "updated_at" from "conversations" where "conversations"."project_id" = $1 order by "conversations"."updated_at" desc
params: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
    at PostgresJsPreparedQuery.queryWithCache (file:/Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/pg-core/session.js:41:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/postgres-js/session.js:37:20
    at async GET (src/routes/api/projects/[id]/conversations/+server.ts:33:27)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[1;31m[500] GET /api/projects/f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0/conversations[0m
Error: Failed query: select "id", "project_id", "title", "is_archived", "created_at", "updated_at" from "conversations" where "conversations"."project_id" = $1 order by "conversations"."updated_at" desc
params: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
    at PostgresJsPreparedQuery.queryWithCache (file:/Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/pg-core/session.js:41:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/postgres-js/session.js:37:20
    at async GET (src/routes/api/projects/[id]/conversations/+server.ts:33:27)

[1;31m[500] POST /api/projects/f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0/multiplayer[0m
Error: Failed query: select "id", "user_id", "name", "share_code", "state", "created_at", "updated_at" from "projects" where "projects"."id" = $1 limit $2
params: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0,1
    at PostgresJsPreparedQuery.queryWithCache (file:/Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/pg-core/session.js:41:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/postgres-js/session.js:37:20
    at async POST (src/routes/api/projects/[id]/multiplayer/+server.ts:33:18)
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: Error: read ECONNRESET
  [90m    at TLSWrap.onStreamRead (node:internal/stream_base_commons:216:20)[39m
  [90m    at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    errno: [33m-54[39m,
    code: [32m'ECONNRESET'[39m,
    syscall: [32m'read'[39m
  }
}
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[1;31m[500] GET /api/projects/f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0/assets[0m
Error: Failed query: select "id", "user_id", "name", "share_code", "state", "created_at", "updated_at" from "projects" where "projects"."id" = $1 limit $2
params: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0,1
    at PostgresJsPreparedQuery.queryWithCache (file:/Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/pg-core/session.js:41:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/postgres-js/session.js:37:20
    at async GET (src/routes/api/projects/[id]/assets/+server.ts:23:20)
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: Error: read ECONNRESET
  [90m    at TLSWrap.onStreamRead (node:internal/stream_base_commons:216:20)[39m
  [90m    at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    errno: [33m-54[39m,
    code: [32m'ECONNRESET'[39m,
    syscall: [32m'read'[39m
  }
}
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: Error: read ECONNRESET
  [90m    at TLSWrap.onStreamRead (node:internal/stream_base_commons:216:20)[39m
  [90m    at TLSWrap.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    errno: [33m-54[39m,
    code: [32m'ECONNRESET'[39m,
    syscall: [32m'read'[39m
  }
}
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: ConnectTimeoutError: Connect Timeout Error (attempted addresses: 104.18.38.10:443, timeout: 10000ms)
  [90m    at onConnectTimeout (node:internal/deps/undici/undici:2602:28)[39m
  [90m    at Immediate._onImmediate (node:internal/deps/undici/undici:2583:11)[39m
  [90m    at process.processImmediate (node:internal/timers:491:21)[39m
  [90m    at process.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    code: [32m'UND_ERR_CONNECT_TIMEOUT'[39m
  }
}

[1;31m[500] GET /api/conversations/9ca3eeaa-1541-47cf-9c89-6609b57343ee/messages[0m
Error: Failed query: select "conversations"."id", "conversations"."project_id", "conversations"."title", "conversations"."is_archived", "conversations"."created_at", "conversations"."updated_at", "projects"."id", "projects"."user_id", "projects"."name", "projects"."share_code", "projects"."state", "projects"."created_at", "projects"."updated_at" from "conversations" inner join "projects" on "conversations"."project_id" = "projects"."id" where "conversations"."id" = $1 limit $2
params: 9ca3eeaa-1541-47cf-9c89-6609b57343ee,1
    at PostgresJsPreparedQuery.queryWithCache (file:/Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/pg-core/session.js:41:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/postgres-js/session.js:37:20
    at async GET (src/routes/api/conversations/[id]/messages/+server.ts:18:25)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: Error: getaddrinfo ENOTFOUND ecvornccdtwsumbsrwcp.supabase.co
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:120:26)[39m
  [90m    at GetAddrInfoReqWrap.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'ecvornccdtwsumbsrwcp.supabase.co'[39m
  }
}
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: ConnectTimeoutError: Connect Timeout Error (attempted addresses: 172.64.149.246:443, 104.18.38.10:443, timeout: 10000ms)
  [90m    at onConnectTimeout (node:internal/deps/undici/undici:2602:28)[39m
  [90m    at Immediate._onImmediate (node:internal/deps/undici/undici:2583:11)[39m
  [90m    at process.processImmediate (node:internal/timers:491:21)[39m
  [90m    at process.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    code: [32m'UND_ERR_CONNECT_TIMEOUT'[39m
  }
}















[1;1H[0J[2m4:37:06 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/tools/ToolCreateFile.svelte, /src/app.css[22m















[1;1H[0J[2m4:37:06 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/tools/ToolCreateFile.svelte[22m
[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mSyntax error "n"[0m

    virtual:src/scenes/Game.js:1:267:
[37m      1 â”‚ ...ection with multiplayer sync\n * - Wall jumping and coyote time\n */\[32m[37mn\nexport const Game = {\n  create(scene, data) {\n    gameAPI.log(`S...
        â•µ                                                                         [32m^[0m

Bundling error: Error: Build failed with 1 error:
virtual:src/scenes/Game.js:1:267: ERROR: Syntax error "n"
    at failureErrorWithLog (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:1467:15)
    at /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:926:25
    at runOnEndCallbacks (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:1307:45)
    at buildResponseToResult (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:924:7)
    at /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:951:16
    at responseCallbacks.<computed> (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:603:9)
    at handleIncomingPacket (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:658:12)
    at Socket.readFromStdout (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/esbuild@0.25.12/node_modules/[4mesbuild[24m/lib/main.js:581:7)
[90m    at Socket.emit (node:events:524:28)[39m
[90m    at addChunk (node:internal/streams/readable:561:12)[39m {
  errors: [36m[Getter/Setter][39m,
  warnings: [36m[Getter/Setter][39m
}
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)















[1;1H[0J[2m4:40:13 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m4:40:13 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/lib/ai/tools.ts[22m















[1;1H[0J[2m4:40:34 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/chat/tools/ToolCreateFile.svelte, /src/app.css[22m















[1;1H[0J[2m4:40:34 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/chat/tools/ToolCreateFile.svelte[22m
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 1 total, sending last 1 to model (1 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 2 total, sending last 2 to model (1 user turns)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 3 total, sending last 3 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 4 total, sending last 4 to model (2 user turns)
=== CHAT API DEBUG ===
Extracted projectId from messages: f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0
Extracted planMode from messages: [33mtrue[39m
ðŸ“Š Message count: 5 total, sending last 5 to model (3 user turns)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: Error: getaddrinfo ENOTFOUND ecvornccdtwsumbsrwcp.supabase.co
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:120:26)[39m
  [90m    at GetAddrInfoReqWrap.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'ecvornccdtwsumbsrwcp.supabase.co'[39m
  }
}
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: Error: getaddrinfo ENOTFOUND ecvornccdtwsumbsrwcp.supabase.co
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:120:26)[39m
  [90m    at GetAddrInfoReqWrap.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'ecvornccdtwsumbsrwcp.supabase.co'[39m
  }
}

[1;31m[500] GET /api/conversations/1592a5c8-7953-42bd-86cf-fdc8fabe377d/messages[0m
Error: Failed query: select "conversations"."id", "conversations"."project_id", "conversations"."title", "conversations"."is_archived", "conversations"."created_at", "conversations"."updated_at", "projects"."id", "projects"."user_id", "projects"."name", "projects"."share_code", "projects"."state", "projects"."created_at", "projects"."updated_at" from "conversations" inner join "projects" on "conversations"."project_id" = "projects"."id" where "conversations"."id" = $1 limit $2
params: 1592a5c8-7953-42bd-86cf-fdc8fabe377d,1
    at PostgresJsPreparedQuery.queryWithCache (file:/Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/pg-core/session.js:41:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///Users/yao/blueprint/martini/node_modules/.pnpm/drizzle-orm@0.44.7_@cloudflare+workers-types@4.20251107.0_@opentelemetry+api@1.9.0_postgres@3.4.7/node_modules/drizzle-orm/postgres-js/session.js:37:20
    at async GET (src/routes/api/conversations/[id]/messages/+server.ts:18:25)
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: Error: getaddrinfo ENOTFOUND ecvornccdtwsumbsrwcp.supabase.co
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:120:26)[39m
  [90m    at GetAddrInfoReqWrap.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'ecvornccdtwsumbsrwcp.supabase.co'[39m
  }
}
TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13484:13[39m
[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at async _handleRequest (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:101:18)
    at async _request (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/lib/fetch.js:91:18)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1247:24
    at async SupabaseAuthClient._useSession (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1136:20)
    at async SupabaseAuthClient._getUser (/Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1237:20)
    at async /Users/yao/blueprint/martini/node_modules/[4m.pnpm[24m/@supabase+auth-js@2.80.0/node_modules/[4m@supabase[24m/auth-js/dist/main/GoTrueClient.js:1224:20 {
  [cause]: Error: getaddrinfo ENOTFOUND ecvornccdtwsumbsrwcp.supabase.co
  [90m    at GetAddrInfoReqWrap.onlookupall [as oncomplete] (node:dns:120:26)[39m
  [90m    at GetAddrInfoReqWrap.callbackTrampoline (node:internal/async_hooks:130:17)[39m {
    errno: [33m-3008[39m,
    code: [32m'ENOTFOUND'[39m,
    syscall: [32m'getaddrinfo'[39m,
    hostname: [32m'ecvornccdtwsumbsrwcp.supabase.co'[39m
  }
}















[1;1H[0J[2m4:40:48 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m















[1;1H[0J[2m4:40:48 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m [33m(x2)[39m

[1;31m[500] GET /play/4E96KP[0m
ReferenceError: window is not defined
    at /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte:192:3
    at #close_render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:605:4)
    at #render (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:502:20)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:398:32)
    at Object.get (/Users/yao/blueprint/martini/node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/legacy/legacy-server.js:40:24)
    at /Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:230:13
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at with_request_store (file:///Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/exports/internal/event.js:77:20)
    at render_response (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/render.js:204:21)
    at async render_page (/Users/yao/blueprint/martini/node_modules/.pnpm/@sveltejs+kit@2.48.4_@opentelemetry+api@1.9.0_@sveltejs+vite-plugin-svelte@6.2.1_svelte_f42192d8b22596d148ed4b8fe64696c9/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:340:10)















[1;1H[0J[2m5:58:03 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css[22m















[1;1H[0J[2m5:58:03 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/lib/multiplayer/MultiplayerManager.svelte[22m















[1;1H[0J[2m5:58:03 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2msrc/lib/multiplayer/MockMultiplayer.ts[22m















[1;1H[0J[2m5:58:03 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/lib/multiplayer/MockMultiplayer.ts[22m [33m(x2)[39m















[1;1H[0J[2m5:58:03 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/app.css, /src/routes/play/[shareCode]/+page.svelte[22m















[1;1H[0J[2m5:58:03 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/lib/multiplayer/Multiplayer.ts[22m
[2m5:58:03 PM[22m [31m[1m[vite][22m[39m [31m[2m(client)[22m[39m Pre-transform error: Failed to load url /src/lib/multiplayer/Multiplayer.ts (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/Multiplayer.ts) in /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte. Does the file exist?
[2m5:58:05 PM[22m [31m[1m[vite][22m[39m [31m[2m(ssr)[22m[39m [31mError when evaluating SSR module /src/routes/play/[shareCode]/+page.svelte: Failed to load url /src/lib/multiplayer/Multiplayer.ts (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/Multiplayer.ts) in /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte. Does the file exist?[39m
      at loadAndTransform (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:23280:33)
      at async fetchModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:34612:15)
      at async handleInvoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26453:21)
      at async EventEmitter.listenerForInvokeHandler (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26508:13)

[1;31m[404] GET /src/lib/multiplayer/Multiplayer.ts[0m

[1;31m[500] GET /play/4E96KP[0m
Error: Failed to load url /src/lib/multiplayer/Multiplayer.ts (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/Multiplayer.ts) in /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte. Does the file exist?
    at loadAndTransform (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:23280:33)
    at async fetchModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:34612:15)
    at async handleInvoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26453:21)
    at async EventEmitter.listenerForInvokeHandler (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26508:13)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/Multiplayer.ts[0m
[2m5:58:05 PM[22m [31m[1m[vite][22m[39m [31m[2m(ssr)[22m[39m [31mError when evaluating SSR module /src/routes/editor/[projectId]/+page.svelte: Failed to load url /src/lib/multiplayer/MultiplayerManager.svelte (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/MultiplayerManager.svelte) in /Users/yao/blueprint/martini/apps/web/src/routes/editor/[projectId]/+page.svelte. Does the file exist?[39m
      at loadAndTransform (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:23280:33)
      at async fetchModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:34612:15)
      at async handleInvoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26453:21)
      at async EventEmitter.listenerForInvokeHandler (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26508:13)

[1;31m[500] GET /editor/f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0[0m
Error: Failed to load url /src/lib/multiplayer/MultiplayerManager.svelte (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/MultiplayerManager.svelte) in /Users/yao/blueprint/martini/apps/web/src/routes/editor/[projectId]/+page.svelte. Does the file exist?
    at loadAndTransform (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:23280:33)
    at async fetchModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:34612:15)
    at async handleInvoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26453:21)
    at async EventEmitter.listenerForInvokeHandler (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26508:13)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/Multiplayer.ts[0m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/MockMultiplayer.ts[0m















[1;1H[0J[2m5:58:28 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m















[1;1H[0J[2m5:58:28 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m [33m(x2)[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
Error: Failed to load url /src/lib/multiplayer/Multiplayer.ts (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/Multiplayer.ts) in /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte. Does the file exist?
    at loadAndTransform (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:23280:33)
    at async fetchModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:34612:15)
    at async handleInvoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26453:21)
    at async EventEmitter.listenerForInvokeHandler (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26508:13)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/Multiplayer.ts[0m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /editor/f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0[0m
Error: Failed to load url /src/lib/multiplayer/MultiplayerManager.svelte (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/MultiplayerManager.svelte) in /Users/yao/blueprint/martini/apps/web/src/routes/editor/[projectId]/+page.svelte. Does the file exist?
    at loadAndTransform (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:23280:33)
    at async fetchModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:34612:15)
    at async handleInvoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26453:21)
    at async EventEmitter.listenerForInvokeHandler (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26508:13)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/Multiplayer.ts[0m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/MockMultiplayer.ts[0m















[1;1H[0J[2m6:01:47 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m [33m(x3)[39m















[1;1H[0J[2m6:01:47 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2mstatic/sandbox-runtime.html[22m [33m(x4)[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
Error: Failed to load url /src/lib/multiplayer/Multiplayer.ts (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/Multiplayer.ts) in /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte. Does the file exist?
    at loadAndTransform (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:23280:33)
    at async fetchModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:34612:15)
    at async handleInvoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26453:21)
    at async EventEmitter.listenerForInvokeHandler (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26508:13)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/Multiplayer.ts[0m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /editor/f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0[0m
Error: Failed to load url /src/lib/multiplayer/MultiplayerManager.svelte (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/MultiplayerManager.svelte) in /Users/yao/blueprint/martini/apps/web/src/routes/editor/[projectId]/+page.svelte. Does the file exist?
    at loadAndTransform (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:23280:33)
    at async fetchModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:34612:15)
    at async handleInvoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26453:21)
    at async EventEmitter.listenerForInvokeHandler (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26508:13)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/Multiplayer.ts[0m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/MockMultiplayer.ts[0m
[36m6:02:01 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:02:01 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:02:01 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m















[1;1H[0J[2m6:02:01 PM[22m [36m[1m[vite][22m[39m [90m[2m(client)[22m[39m [32mhmr update [39m[2m/src/routes/editor/[projectId]/+page.svelte, /src/app.css[22m















[1;1H[0J[2m6:02:01 PM[22m [36m[1m[vite][22m[39m [34m[2m(ssr)[22m[39m [32mpage reload [39m[2msrc/routes/editor/[projectId]/+page.svelte[22m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /play/4E96KP[0m
Error: Failed to load url /src/lib/multiplayer/Multiplayer.ts (resolved id: /Users/yao/blueprint/martini/apps/web/src/lib/multiplayer/Multiplayer.ts) in /Users/yao/blueprint/martini/apps/web/src/routes/play/[shareCode]/+page.svelte. Does the file exist?
    at loadAndTransform (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:23280:33)
    at async fetchModule (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:34612:15)
    at async handleInvoke (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26453:21)
    at async EventEmitter.listenerForInvokeHandler (file:///Users/yao/blueprint/martini/node_modules/.pnpm/vite@7.2.2_@types+node@22.19.0_jiti@2.6.1_lightningcss@1.30.2_tsx@4.20.6/node_modules/vite/dist/node/chunks/config.js:26508:13)
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[404] GET /src/lib/multiplayer/Multiplayer.ts[0m
[36m6:02:02 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:02:02 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:02:02 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server.

[1;31m[500] GET /editor/f2bc0ab4-9ab1-4eb5-9c6a-0f0d52f0d0f0[0m
ReferenceError: MultiplayerManager is not defined
    at $$render_inner (src/routes/editor/[projectId]/+page.svelte:482:5)
    at eval (src/routes/editor/[projectId]/+page.svelte:1011:5)
    at Renderer.child (../../node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:184:18)
    at Renderer.component (../../node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:209:22)
    at _page (src/routes/editor/[projectId]/+page.svelte:32:13)
    at eval (.svelte-kit/generated/root.svelte:71:7)
    at /Users/yao/blueprint/martini/apps/web/src/routes/+layout.svelte:30:10
    at Renderer.child (../../node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:184:18)
    at Renderer.component (../../node_modules/.pnpm/svelte@5.43.4/node_modules/svelte/src/internal/server/renderer.js:209:22)
    at _layout (src/routes/+layout.svelte:18:13)
[36m6:02:03 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:21:5 `gamePreview` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:02:03 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:22:5 `aiChatPanel` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
[36m6:02:03 PM [vite-plugin-svelte] src/routes/editor/[projectId]/+page.svelte:23:5 `codeEditor` is updated, but is not declared with `$state(...)`. Changing its value will not correctly trigger updates
https://svelte.dev/e/non_reactive_update[39m
