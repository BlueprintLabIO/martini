import{d as vt,f as g,a as c,c as ut,e as bt}from"../chunks/ZfXddHLz.js";import{o as mt}from"../chunks/BBe825MA.js";import{p as ft,b as f,e as xt,s,d as o,t as P,a as gt,g as a,u as ht,c as r,r as e,f as wt}from"../chunks/HPFAwkNo.js";import{s as x}from"../chunks/B1uGGgjB.js";import{i as L}from"../chunks/Do2flsC7.js";import{e as _t,i as yt}from"../chunks/Da6Ho28f.js";import{r as jt,s as kt}from"../chunks/CRjFmqpM.js";import{b as Ct}from"../chunks/DiiBiV_f.js";import{i as Pt,g as Lt}from"../chunks/CAlFmoMD.js";var Nt=g('<div class="bg-red-500/20 border border-red-400 text-red-200 px-4 py-3 rounded-lg mb-6"><p class="font-semibold"> </p></div>'),Et=g('<div class="bg-white/10 backdrop-blur-lg rounded-2xl p-12 shadow-2xl text-center"><div class="text-white text-lg">Loading projects...</div></div>'),Ot=g('<div class="bg-white/10 backdrop-blur-lg rounded-2xl p-12 shadow-2xl text-center"><h3 class="text-2xl font-bold text-white mb-2">No projects yet</h3> <p class="text-purple-200 mb-6">Create your first game project to get started!</p> <button class="bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white px-6 py-3 rounded-lg font-semibold shadow-lg transition-all">Create Your First Project</button></div>'),Dt=g('<div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 shadow-lg hover:bg-white/15 transition-all cursor-pointer border border-white/10"><h3 class="text-xl font-bold text-white mb-2"> </h3> <div class="text-sm text-purple-200 space-y-1"><p> </p> <p> </p></div> <div class="mt-4 flex gap-2"><a class="flex-1 bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg text-sm transition-colors text-center">Open Editor</a></div></div>'),Ft=g('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),Mt=g('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50"><div class="bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-8 max-w-md w-full shadow-2xl border border-white/20"><h3 class="text-2xl font-bold text-white mb-4">Create New Project</h3> <form><div class="mb-4"><label for="projectName" class="block text-sm font-medium text-purple-200 mb-2">Project Name</label> <input id="projectName" type="text" placeholder="My Awesome Game" maxlength="100" required class="w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500"/></div> <div class="flex gap-3"><button type="button" class="flex-1 px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors">Cancel</button> <button type="submit" class="flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed"> </button></div></form></div></div>'),St=g('<div class="min-h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-blue-900"><nav class="bg-white/10 backdrop-blur-lg border-b border-white/20"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center h-16"><div class="flex items-center"><h1 class="text-2xl font-bold text-white">Martini</h1></div> <button class="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50"> </button></div></div></nav> <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><div class="mb-8"><div class="flex justify-between items-center mb-6"><div><h2 class="text-3xl font-bold text-white">My Projects</h2> <p class="text-purple-200 mt-1">Logged in as: <span class="font-mono"> </span></p></div> <button class="bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white px-6 py-3 rounded-lg font-semibold shadow-lg transition-all">+ New Project</button></div> <!> <!></div></main> <!></div>');function Ht(Q,N){ft(N,!0);const R=ht(()=>N.data.supabase);let k=f(!1),E=f(xt([])),O=f(!0),h=f(""),w=f(!1),v=f(""),_=f(!1);async function z(){try{o(O,!0),o(h,"");const t=await fetch("/api/projects"),i=await t.json();if(!t.ok)throw new Error(i.error||"Failed to load projects");o(E,i.projects,!0)}catch(t){o(h,t instanceof Error?t.message:"Failed to load projects",!0)}finally{o(O,!1)}}async function V(){if(a(v).trim())try{o(_,!0),o(h,"");const t=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a(v).trim()})}),i=await t.json();if(!t.ok)throw new Error(i.error||"Failed to create project");o(v,""),o(w,!1),await z()}catch(t){o(h,t instanceof Error?t.message:"Failed to create project",!0)}finally{o(_,!1)}}async function W(){o(k,!0);try{await a(R).auth.signOut(),await Pt("supabase:auth"),Lt("/")}catch(t){console.error("Logout failed:",t),o(k,!1)}}mt(()=>{z()});var D=St(),F=r(D),G=r(F),J=r(G),C=s(r(J),2);C.__click=W;var X=r(C,!0);e(C),e(J),e(G),e(F);var M=s(F,2),U=r(M),S=r(U),A=r(S),Y=s(r(A),2),B=s(r(Y)),Z=r(B,!0);e(B),e(Y),e(A);var $=s(A,2);$.__click=()=>o(w,!0),e(S);var H=s(S,2);{var tt=t=>{var i=Nt(),u=r(i),b=r(u);e(u),e(i),P(()=>x(b,`Error: ${a(h)??""}`)),c(t,i)};L(H,t=>{a(h)&&t(tt)})}var et=s(H,2);{var rt=t=>{var i=Et();c(t,i)},at=t=>{var i=ut(),u=wt(i);{var b=d=>{var l=Ot(),m=s(r(l),4);m.__click=()=>o(w,!0),e(l),c(d,l)},y=d=>{var l=Ft();_t(l,21,()=>a(E),yt,(m,p)=>{var j=Dt(),n=r(j),st=r(n,!0);e(n);var T=s(n,2),q=r(T),lt=r(q);e(q);var I=s(q,2),dt=r(I);e(I),e(T);var K=s(T,2),nt=r(K);e(K),e(j),P((pt,ct)=>{x(st,a(p).name),x(lt,`Created: ${pt??""}`),x(dt,`Updated: ${ct??""}`),kt(nt,"href",`/editor/${a(p).id??""}`)},[()=>new Date(a(p).createdAt).toLocaleDateString(),()=>new Date(a(p).updatedAt).toLocaleDateString()]),c(m,j)}),e(l),c(d,l)};L(u,d=>{a(E).length===0?d(b):d(y,!1)},!0)}c(t,i)};L(et,t=>{a(O)?t(rt):t(at,!1)})}e(U),e(M);var ot=s(M,2);{var it=t=>{var i=Mt(),u=r(i),b=s(r(u),2),y=r(b),d=s(r(y),2);jt(d),e(y);var l=s(y,2),m=r(l);m.__click=()=>{o(w,!1),o(v,"")};var p=s(m,2),j=r(p,!0);e(p),e(l),e(b),e(u),e(i),P(n=>{m.disabled=a(_),p.disabled=n,x(j,a(_)?"Creating...":"Create")},[()=>a(_)||!a(v).trim()]),bt("submit",b,n=>{n.preventDefault(),V()}),Ct(d,()=>a(v),n=>o(v,n)),c(t,i)};L(ot,t=>{a(w)&&t(it)})}e(D),P(()=>{C.disabled=a(k),x(X,a(k)?"Logging out...":"Log Out"),x(Z,N.data.user.email)}),c(Q,D),gt()}vt(["click"]);export{Ht as component};
