{"version":3,"file":"hooks.server-C9Qbaejk.js","sources":["../../../.svelte-kit/adapter-node/chunks/hooks.server.js"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\nimport { P as PUBLIC_SUPABASE_URL, a as PUBLIC_SUPABASE_PUBLISHABLE_KEY } from \"./public.js\";\nconst handle = async ({ event, resolve }) => {\n  event.locals.supabase = createServerClient(PUBLIC_SUPABASE_URL, PUBLIC_SUPABASE_PUBLISHABLE_KEY, {\n    cookies: {\n      getAll: () => event.cookies.getAll(),\n      setAll: (cookiesToSet) => {\n        cookiesToSet.forEach(({ name, value, options }) => {\n          event.cookies.set(name, value, { ...options, path: \"/\" });\n        });\n      }\n    }\n  });\n  event.locals.safeGetSession = async () => {\n    const {\n      data: { session }\n    } = await event.locals.supabase.auth.getSession();\n    if (!session) {\n      return { session: null, user: null };\n    }\n    const {\n      data: { user },\n      error\n    } = await event.locals.supabase.auth.getUser();\n    if (error) {\n      return { session: null, user: null };\n    }\n    return { session, user };\n  };\n  return resolve(event, {\n    filterSerializedResponseHeaders(name) {\n      return name === \"content-range\" || name === \"x-supabase-api-version\";\n    }\n  });\n};\nexport {\n  handle\n};\n"],"names":[],"mappings":";;;AAEK,MAAC,MAAM,GAAG,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK;AAC7C,EAAE,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,kBAAkB,CAAC,mBAAmB,EAAE,+BAA+B,EAAE;AACnG,IAAI,OAAO,EAAE;AACb,MAAM,MAAM,EAAE,MAAM,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE;AAC1C,MAAM,MAAM,EAAE,CAAC,YAAY,KAAK;AAChC,QAAQ,YAAY,CAAC,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK;AAC3D,UAAU,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,GAAG,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC;AACnE,QAAQ,CAAC,CAAC;AACV,MAAM;AACN;AACA,GAAG,CAAC;AACJ,EAAE,KAAK,CAAC,MAAM,CAAC,cAAc,GAAG,YAAY;AAC5C,IAAI,MAAM;AACV,MAAM,IAAI,EAAE,EAAE,OAAO;AACrB,KAAK,GAAG,MAAM,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE;AACrD,IAAI,IAAI,CAAC,OAAO,EAAE;AAClB,MAAM,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;AAC1C,IAAI;AACJ,IAAI,MAAM;AACV,MAAM,IAAI,EAAE,EAAE,IAAI,EAAE;AACpB,MAAM;AACN,KAAK,GAAG,MAAM,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE;AAClD,IAAI,IAAI,KAAK,EAAE;AACf,MAAM,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;AAC1C,IAAI;AACJ,IAAI,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;AAC5B,EAAE,CAAC;AACH,EAAE,OAAO,OAAO,CAAC,KAAK,EAAE;AACxB,IAAI,+BAA+B,CAAC,IAAI,EAAE;AAC1C,MAAM,OAAO,IAAI,KAAK,eAAe,IAAI,IAAI,KAAK,wBAAwB;AAC1E,IAAI;AACJ,GAAG,CAAC;AACJ;;;;"}